<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129091044-1"></script>
<script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>


<script data-cfasync="false">
  window.ramp = window.ramp || {};
  window.ramp.que = window.ramp.que || [];
</script>
<script data-cfasync="false" async src="//cdn.intergient.com/1025271/74959/ramp_config.js"></script>
<script data-cfasync="false">
    window._pwGA4PageviewId = ''.concat(Date.now());
    window.dataLayer = window.dataLayer || [];
    window.gtag = window.gtag || function () {
      dataLayer.push(arguments);
    };
    gtag('js', new Date());
    gtag('config', 'G-R55JEDCM9K', { 'send_page_view': false });
    gtag(
      'event',
      'ramp_js',
      {
        'send_to': 'G-R55JEDCM9K',
        'pageview_id': window._pwGA4PageviewId
      }
    );
</script>

<title>LiveFPL League </title>
<link rel="stylesheet" href="../css/league.css?version=14548" />
<link rel="icon" href="https://livefpl.us/figures/new_logo.ico" type="image/x-icon">
<style>
/* Favorite heart */
.heart-btn{ cursor:pointer; display:inline-flex; vertical-align:middle;display:none }
.red-svg{ fill:#e11d48 !important; }        /* active */
.heart-path{ fill:#676C72; transition:transform .15s ease, fill .15s ease; }
.heart-btn:hover .heart-path{ transform:scale(1.1); }




  :root{
    --bg:#0b0c10; --card:#fff; --ink:#1d2330; --muted:#6f7790;
    --ok:#1a7d5c; --bad:#c23a3a; --same:#9aa0ad;
    --chip:#f5f6fb; --chip-b:#e8eaf0; --pill:#eef6ff; --pill-b:#d8eaff;
    --ring:0 1px 4px rgba(0,0,0,.07); --radius:12px; --ui:#f6f7fa; --ui-b:#e8eaf0;
    --green:#1f7a63; --amber:#fff1cc; --amber-b:#ffe2a3;
  }

  :root{
  /* Canvas + surfaces */
  --bg:#0e1116;        /* softer than #0b0c10 */
  --card:#ffffff;      /* crisp cards */
  --ui:#f3f4f6;        /* subtle UI chips/strips */
  --ui-b:#e5e7eb;      /* consistent borders */
  --ring:0 1px 4px rgba(17,24,39,.06);
  --radius:12px;

  /* Typography */
  --ink:#111827;       /* rich neutral text */
  --muted:#6b7280;     /* subdued labels */

  /* Accent-driven semantics */
  --accent:#0ea5a2;    /* teal (primary) */
  --ok:#0ea5a2;        /* success = accent */
  --bad:#e11d48;       /* clear but not neon */
  --same:#9ca3af;      /* neutral trend */

  /* Pills/Chips (quiet) */
  --chip:#f8fafc;      --chip-b:#e5e7eb;
  --pill:#f0fdf9;      --pill-b:#d1fae5;

  /* Warnings (soft) */
  --amber:#fef3c7;     --amber-b:#fde68a;
}

  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font:14px/1.33 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);}
  .wrap{max-width:1100px;margin:auto;padding:14px;}

  .addmargin{margin-bottom: 100px!important;}
  button { font-size:unset!important;}
  select { font-size:unset!important;height:100%;}

  /* -------- Compact SUPER TOOLBAR -------- */
  /* Toolbar: two equal columns; stacks children inside each column */
/* 2 rows × 2 columns: [Autosubs | Details] on row 1, [League | Sort] on row 2 */
.toolbar{
  display:grid;
  grid-template-columns: 1fr 1fr;
  grid-template-areas:
    "autosubs details"
    "league   sort";
  gap:12px;
  align-items:start;
  background:var(--card);
  padding:8px 10px;
  border-radius:12px;
  box-shadow:var(--ring);
  position:sticky; top:0; z-index:3;
  margin-bottom:5px;
}
.toolbar .minigroup{ display:flex; flex-direction:column; gap:6px; }
.toolbar .minigroup .select{ width:100%; height:100%; }
.seg button{ cursor:pointer; }



/* area hooks */
.toolbar .area-autosubs{ grid-area: autosubs; }
.toolbar .area-details{  grid-area: details; }
.toolbar .area-league{   grid-area: league; }
.toolbar .area-sort{     grid-area: sort; }


  .minigroup{display:flex; align-items:center; gap:8px; flex-wrap:wrap;}
  .label{font-weight:700;}
  .table-player{ position: relative; }

/* hide all label_* overlays by default (match dynamic class names) */
.table-player [class^="label_"]{ opacity:0; }

  .seg{display:inline-flex; border:1px solid var(--ui-b); border-radius:8px; overflow:hidden; background:#fff;}
  .seg button{opacity:0.5;padding:6px 10px; border:0; color:#fff; font-weight:600; background:#444; line-height:1;}
  .seg button + button{ border-left:1px solid var(--ui-b); }
  .seg .active{ background:var(--green); color:#fff; opacity:1}
  .select, .search{padding:6px 10px; border:1px solid var(--ui-b); border-radius:8px; background:#fff;}
  .search{width:220px;}
  .btn{padding:6px 10px; border:1px solid var(--ui-b); background:#fff; border-radius:8px; font-weight:600;}
  .btn.green{background:var(--green); color:#fff; border-color:transparent;}

  /* Advanced drawer (placeholders only) */
  details.advanced{margin-top:8px;}
  details.advanced > summary{list-style:none; cursor:pointer; user-select:none; color:#415; font-weight:700; padding:6px 8px; display:inline-flex; gap:8px; align-items:center;}
  details.advanced > summary::-webkit-details-marker{display:none}
  .drawer{background:var(--card); border-radius:12px; box-shadow:var(--ring); padding:12px; margin-top:6px;}
  .rowgrid{display:grid; gap:3px; align-items:center;}
  .rowgrid.cols-2{grid-template-columns: 1fr auto;}
  .inline{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
  .countpill{background:#FFF8D9; border:1px solid #e3e5ec; padding:6px 10px; border-radius:10px;}
  .notice{background:var(--amber); border:1px solid var(--amber-b); color:#6b4e00; padding:10px; border-radius:8px; margin-top:8px; font-weight:600;}

  /* -------- Sorter (working) -------- */
  .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:10px 0 8px;}
  .controls select{padding:6px 10px; border:1px solid var(--ui-b); background:var(--ui); border-radius:8px;}
  .controls button{padding:6px 10px; border:1px solid var(--ui-b); background:#fff; border-radius:8px; cursor:pointer;}

  /* -------- League rows -------- */
  .lfpl-list{display:grid;gap:3px;}
  .row{background:var(--card);border-radius:12px;box-shadow:var(--ring);overflow:hidden;}
  .row summary{display:block;cursor:pointer;list-style:none;}
  .row summary::-webkit-details-marker{display:none}

  .row-header{
    display:grid;padding:5px 14px;align-items:center;
    grid-template-columns:auto 1fr 0.5fr auto auto;
  }
  /* Trend icon: use PNGs instead of text */
.id .captain
{
    font-weight:bold;
}
.id .vice {
  font-size: 0.65em;      /* smaller than captain */
  margin-top: 2px;        /* spacing below captain */
  color: var(--muted, #6f7790);
}

.highlight2 .vice
{
    color:white;
}
  .rank{text-align:center;font-weight:800;color:#2b7a2b;}

  .id{min-width:0;display:flex;flex-direction:column;}
  .team-name{font-weight:800;color:#0f172a;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
  .manager{color:#0f172a;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

  .kpis{display:flex;gap:6px;align-items:center;flex-wrap:wrap;}
  .kpi{background:#f6f7fa;border:1px solid #e8eaf0;padding:1px 5px;border-radius:999px;white-space:nowrap;font-size:11px;}
  .kpi b{font-size:11px;color:#0f172a;text-transform:uppercase;letter-spacing:.02em;margin-right:6px;}
  .kpi.played{background:#eaf7ea;border-color:#d5f0d5;font-weight:600;}

  .total{min-width:72px;text-align:center;padding:6px 10px;border-radius:10px;color:#0f172a;}
  .total b{display:block;font-size:10px;color:#0f172a;letter-spacing:.02em}

  .strip{display:grid;padding:5px 14px;border-top:1px solid #f0f2f6;grid-template-columns:auto auto 1fr;align-items:center;}
  .chips{display:flex;gap:6px;align-items:center;margin-top:2px}
  .chip{display:none;font-size:11px;padding:3px 6px;border-radius:6px;border:1px solid black;color:#555;background:var(--chip);line-height:1;position:relative}
  .chip.used{display:block;text-decoration:line-through;color:#9aa0ad;background:#f3f4f7;}
  .chip.active{display:block;font-weight:800;color:#0b3b2c;background:#e6fff5;border-color:#8be0c0;box-shadow:0 0 0 2px rgba(27,197,139,.18);}
  .chip.active::after{content:"";position:absolute;top:-3px;right:-3px;width:8px;height:8px;border-radius:50%;background:#1bc58b;border:2px solid #fff;box-shadow:0 0 0 2px rgba(27,197,139,.22);}
  .cap{display:flex;gap:8px;align-items:center;}
  .badge{font-size:11px;padding:3px 8px;border-radius:6px;background:var(--pill);border:1px solid var(--pill-b);}
  .badge.soft{background:#f7f7fb;border-color:#ececf3;color:#666;}
  .transfers{display:flex;min-width:0;align-items:center;gap:6px;color:#333;overflow:hidden;font-size:smaller;}
  .transfers .xfer .xfer-diff{
  font-variant-numeric: tabular-nums;
}

  .xfer{display:inline-flex;gap:6px;align-items:center;white-space:nowrap;}
  .xfer .out{color:var(--bad);text-decoration:line-through;} .xfer .in{color:#0f172a;font-weight:700;}
  .dot{opacity:.45;} .arrow{opacity:.7;}
    /* Make segmented buttons feel clickable */
.seg button{ cursor:pointer; }

/* Hide strips when toggled */
.strip-hidden .strip{ display:none !important; }
/* If a row is open, always show its strip even when global "Hide" is on */
.strip-hidden .row[open] .strip {
  display: grid !important;
}


  .expand{padding:14px;border-top:1px solid #f0f2f6;}
  .team-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px;margin-top:6px;}
  .player{background:#f9fafc;border:1px solid #e4e7ec;padding:6px;text-align:center;border-radius:8px;font-size:12px;}
  .player.captain{border-color:#1a7d5c;font-weight:700;}
  .player.vice{border-color:#6b46ff;}

  @media (max-width: 720px){

    .search{width:100%;}
  }
  @media (max-width:640px){

    .team-name,.manager{white-space:normal; overflow-wrap:anywhere; text-overflow:clip;}
    .strip{grid-template-columns:1fr;}
    .transfers{overflow:auto;-webkit-overflow-scrolling:touch;}
    .filter-popover .filter-row{ grid-template-columns: 1fr; }

  }




/* Keep your old overlay <p> element (emoji placeholder) invisible by default */
.table-player .label_*{ opacity:0; }


/* Hide any element whose class token starts with "label_" inside the compare table */
#compareModal .compare-table .table-player [class^="label_"],
#compareModal .compare-table .table-player [class*=" label_"] {
  display: none !important;
}

/* highlight matching managers */
.row.selected{ outline:2px solid aquamarine; }

/* very light modal styles */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.4); display:none; z-index:50;     }
.modal[open]{ display:block; }
.modal .modal-content{ max-width:980px; margin:6vh auto; background:#fff; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.25); overflow:hidden; }
.modal-head{ display:flex; justify-content:space-between; align-items:center; padding:12px 16px; border-bottom:1px solid #eef0f5; }
.modal-head h2{ margin:0; font-size:18px; }
.modal-body{ padding:14px; display:grid; gap:12px; }
.modal .close-modal{ border:0; background:#f5f6fb; padding:6px 10px; border-radius:8px; cursor:pointer; }
#ownership{ width:100%; border-collapse:collapse; }
#ownership th,#ownership td{ border:1px solid #eef0f5; padding:6px 8px; font-size:13px; }
.chips_tb{  border-collapse:collapse; }
.chips_tb th,.chips_tb td{ border:1px solid #eef0f5; padding:6px 8px; font-size:13px; }

/* iOS: stop auto text zoom surprises */
html { -webkit-text-size-adjust: 100%; }

/* Responsive team grid that truly shrinks on small screens */
.table-player-all{
  display:grid;

}

/* Shirt size that scales smoothly across devices */
.table-club-shirt{

      margin-bottom: 2rem;
      height:40px;
}

/* Make the labels adapt instead of forcing fixed widths */
.table-player-name,
.table-player-percent,
.table-player-played,
.table-player-live,
.table-player-notplay,
.table-player-ytoplay,
.table-player-bench{


  min-width: 0;      /* fixes clipping in Safari grid items */
}

@media (max-width:640px){
    .table-player-name,
    .table-player-percent,
    .table-player-played,
    .table-player-live,
    .table-player-notplay,
    .table-player-ytoplay,
    .table-player-bench
    {
        font-size: 2rem!important;
        width:11rem!important;

    }
    .modal
    {
        margin-top: 10%;
    }
    }

    /* make the header an anchor for the chevron */
.row-header{ position: relative; }

/* tiny rotating chevron */
.chev{
  position:absolute;
  right:10px;                 /* nudge to taste */
  top:50%;
  width:10px; height:10px;
  border-right:2px solid #9aa0ad;
  border-bottom:2px solid #9aa0ad;
  transform: translateY(-50%) rotate(-45deg);  /* points “›” */
  opacity:.55;
  transition: transform .18s ease, opacity .18s;
  pointer-events:none;        /* never blocks clicks on <summary> */
}
summary:hover .chev{ opacity:.85; }
.row[open] .chev{ transform: translateY(-50%) rotate(45deg); } /* points “⌄” */

@media (max-width:640px){
  .chev{ right:8px; width:9px; height:9px; border-width:2px; }
}

    /* --- Controls bar polish --- */
.controls {
  display:flex; align-items:center; gap:10px;
  background:var(--card); padding:6px 10px; border-radius:10px; box-shadow:var(--ring);
}
.controls label { font-weight:700; color:#3a3f53; }
.controls select { padding:6px 10px; border:1px solid var(--ui-b); background:#fff; border-radius:8px; }
.controls .btn { padding:6px 10px; border:1px solid var(--ui-b); border-radius:8px; background:#fff; }
.controls .btn:hover { background:#f7f8fb; }
.countpill { background:#FFF8D9; border:1px solid #e3e5ec; padding:6px 10px; border-radius:999px; font-weight:600; }

/* Segmented toggle: clearer active/hover/focus */
.seg { display:inline-flex; border:1px solid var(--ui-b); border-radius:8px; overflow:hidden;  }
.seg button { padding:6px 10px; font-weight:700;  color:#0f172a; background:#fff}

.seg button:focus-visible { outline:2px solid #7fb8ff; outline-offset:-2px; }

/* Row highlight: very visible */
.row.selected {
  box-shadow: 0 0 0 3px rgba(0,212,170,.85) inset, 0 2px 10px rgba(0,0,0,.08);
  border-radius:12px;
}

/* Soft background highlight (no border) */
:root{
  /* tweak to taste: warm = #FFF8D9, cool = #F2F7FF, mint = #F5FFF6 */
  --row-hl: #FFF8D9;
}

.row{ transition: background-color .16s ease; }
.row.selected{
  background-color: var(--row-hl);   /* no outline/border */
  box-shadow: var(--ring);           /* keep your normal card shadow */
}

/* keep inner sections visually blended with the tinted card */
.row.selected .strip { background-color: transparent; }
.row.selected .expand { background-color: transparent; }

/* optional: slight pop for pills on highlight (keeps legible) */
.row.selected .kpi,
.row.selected .chip,
.row.selected .badge { filter: saturate(1.05); }

/* ----- Modal responsive fixes ----- */
@media (max-width: 640px){
  /* remove big top padding from any legacy modal rule */
  .modal{ padding: 0 !important; }

  /* use almost-fullscreen card that can scroll inside */
  .modal .modal-content{
    width: 96vw; max-width: 96vw;
    height: 92svh; max-height: 92svh;   /* svh = iOS-friendly viewport height */
    margin: 4vh auto;
    display: flex;
    flex-direction: column;
    overflow: hidden;                    /* contain inner scroll */
    border-radius: 12px;
  }

  .modal .modal-head{ padding: 10px 12px; }
  .modal .modal-body{
    padding: 8px;
    overflow: auto;                      /* vertical scroll inside */
  }

  /* table scrollers (horizontal) */
  .table-scroller{
    overflow: auto;
    -webkit-overflow-scrolling: touch;   /* smooth iOS scroll */
    margin-bottom: 8px;
  }
  .table-scroller table{
    min-width: 560px;                    /* force a scroll container if needed */
  }

  /* slightly smaller table text on mobile to fit better */
  #ownership th, #ownership td,
  .chips_tb th, .chips_tb td { font-size: 12px; }
}

/* Desktop tidy: two columns (chips left, ownership right) */
@media (min-width: 641px){
  .modal .modal-body{
    display: grid;
    grid-template-columns: 360px 1fr;
    gap: 12px;
    overflow: hidden;                    /* grid children manage their own scroll */
  }
}

.table-player { position: relative; }
/* unified placement for ALL contexts (list + compare) */
.eo-badge{
  position:absolute;
  top:6px;
  right:6px;
  font-size: clamp(12px, 3.2vw, 16px);
  line-height:1;
  margin:0;
  z-index:2;
  pointer-events:none;
}

/* compare modal table headers too */
#compareModal .compare-table th{ white-space:pre-line; }

/* EO table: keep table, no horizontal scroll on small screens */
@media (max-width:540px){
  .table-scroller #ownership{ min-width:0 !important; } /* override your 560px min */
  #ownership{ table-layout:fixed; width:100%; }
  #ownership th,#ownership td{ font-size:11px; padding:6px 6px; word-break:break-word; }
  /* suggested column widths that fit most cases */
  #ownership th:nth-child(1), #ownership td:nth-child(1){ width:20%; } /* Player */
  #ownership th:nth-child(2), #ownership td:nth-child(2),
  #ownership th:nth-child(3), #ownership td:nth-child(3),
  #ownership th:nth-child(4), #ownership td:nth-child(4),
  #ownership th:nth-child(5), #ownership td:nth-child(5){ width:11%; }
  #ownership th:nth-child(6), #ownership td:nth-child(6){ width:10%; } /* EO */
  /* put percentages on a second line to save width */
  #ownership td .pct{ display:block; opacity:.75; }
}
/* sticky, thead-like band that sits under the toolbar */
.lfpl-thead{
  background: white;
  border: 1px solid var(--ui-b);
  border-radius: 10px;
  padding: 0px 10px;
  margin: 6px 0 8px;
  box-shadow: var(--ring);

  position: sticky;
  top: var(--sticky-under-toolbar, 56px); /* dynamically set via JS */
  z-index: 4; /* below toolbar (z=3), above rows */
}
.lfpl-thead-cell{
  font-weight: 800;
  color: #0f172a;

  letter-spacing: .02em;
  font-size: 12px;
}

/* Center the header text both ways */
.lfpl-thead{
  display: flex;
  justify-content: center;  /* horizontal */
  align-items: center;      /* vertical */
}

.lfpl-thead-cell{
  text-align: center;       /* center text in its box */
  line-height: 1.4;         /* tweak if text feels cramped */
}
/* Tighten the header band */
.lfpl-thead{
  display:flex;
  justify-content:center;
  align-items:center;   /* vertical center */
  padding: 2px 8px;     /* reduce top/bottom padding */
  min-height: 32px;     /* fixed height keeps it neat */
}

/* Ensure text is truly centered */
.lfpl-thead-cell{
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  line-height:0.2;      /* avoid tall text boxes */
  margin:0;             /* strip any stray margins */
}


.seg .active{  background:#fff;color:#0f172a;}
.rank{ color:#0f766e; }                  /* replace #2b7a2b */
.kpi{ background:var(--ui); border-color:var(--ui-b); }
.chip.active{ box-shadow:0 0 0 2px rgba(14,165,162,.16); }

/* ==== Compare modal — two equal halves, one shared scroll ==== */
#compareModal .modal-body.compare-body{
  display: grid;
  grid-template-columns: minmax(0,1fr) minmax(0,1fr); /* exactly 50/50 */
  gap: 12px;
  align-items: start;
  overflow: auto !important; /* single scroll area for both sides */
}

/* keep two columns even on tiny screens (no stacking) */
@media (max-width:640px){
  #compareModal .modal-body.compare-body{
    grid-template-columns: minmax(0,1fr) minmax(0,1fr) !important;
  }
}

#compareModal .compare-body .column{
  min-width: 0; /* lets each column shrink evenly */
}

#compareModal .compare-body select{ width:100%;height:100%; }

#compareModal .compare-table{
  width: 100%;
  table-layout: fixed;       /* prevents one side from dictating width */
  border-collapse: collapse;
}
#compareModal .compare-table th,
#compareModal .compare-table td{

  font-size: clamp(11px, 2.8vw, 13px);
  word-break: break-word;
}
.compare-dim{ opacity:.25; }
/* Compare modal: keep the emoji pinned top-right on each tile */
#compareModal .table-player{ position: relative; }
#compareModal .eo-badge{
  position: absolute;
  top: 6px;
  right: 6px;
  bottom: auto;     /* override the global bottom:63% */
  font-size: clamp(12px, 3vw, 16px);
  line-height: 1;
  margin: 0;
  z-index: 2;
  pointer-events: none;
}

/* make table cells top-align so badges don't “drift” vertically */
#compareModal .compare-table td{ vertical-align: top; }

/* Slim bar */
.litebar{
  display:flex; align-items:center; gap:10px;
  margin:0;
}
.litebar .spacer{ flex:1; }

/* Filter pill */
.pill{
  border:1px solid var(--ui-b);
  background:#fff;
  border-radius:999px;
  padding:6px 12px;
  font-weight:700; color:#0f172a;
  cursor:pointer;
}
.pill[aria-expanded="true"]{ background:var(--pill); border-color:var(--pill-b); }

/* Active chips summary */
.chipsline{ display:flex; gap:6px; flex-wrap:wrap; align-items:center; }
.chipsline .chip{
  display:inline-flex; align-items:center; gap:6px;
  background:var(--ui); border:1px solid var(--ui-b);
  padding:4px 8px; border-radius:999px; font-size:12px; color:#0f172a;
}
.chipsline .chip .x{ cursor:pointer; opacity:.7; font-weight:800; }
.chipsline .chip .x:hover{ opacity:1; }

/* Tools: icon-only, low noise */
.iconbtn{
  display:inline-flex; align-items:center; justify-content:center;
  width:32px; height:32px; border:1px solid var(--ui-b);
  border-radius:8px; background:#fff; cursor:pointer;
}
.iconbtn:hover{ background:var(--ui); }

/* Filter popover (card) */
.filter-popover{
  position:absolute; inset:auto auto auto 0;
  background:#fff; border:1px solid var(--ui-b); border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.12); padding:10px; z-index:5;
  min-width:260px;
}
.filter-popover .filter-row{ display:grid; grid-template-columns: 80px 1fr; gap:8px; align-items:center; margin-bottom:8px; }
.filter-popover label{ font-weight:700; color:#3a3f53; font-size:12px; }
.filter-popover select{ padding:6px 10px; border:1px solid var(--ui-b); border-radius:8px; background:#fff; }

/* actions */
.btn-ghost{
  border:1px solid var(--ui-b); background:#fff; border-radius:8px; padding:6px 10px; cursor:pointer;
}
.btn-primary{
  border:1px solid transparent; background:#0f172a; color:#fff; border-radius:8px; padding:6px 10px; font-weight:700; cursor:pointer;
}
.filter-actions{ display:flex; justify-content:space-between; gap:8px; margin-top:6px; }

/* Mobile: use a bottom sheet */
@media (max-width:640px){
  .filter-popover{
    position:fixed; left:50%!important; transform:translateX(-50%);
    bottom:100px; width:calc(100vw - 24px); min-width:0; padding:12px;
  }

  .iconbtn{ width:36px; height:36px; }
}

.litebar{
  display:flex; align-items:center; gap:10px;
  margin:0;

  /* new: make it look like the other elements */
  background:var(--card);
  border:1px solid var(--ui-b);
  border-radius:12px;
  box-shadow:var(--ring);
  padding:6px 10px;
}


.chipsline:empty { display:none; }
/* Global icon size that scales up on bigger screens */
:root{ --icon-size: 18px; }
@media (min-width:640px){ :root{ --icon-size: 20px; } }
@media (min-width:1024px){ :root{ --icon-size: 22px; } }

/* Make the icons a fixed, non-shrinking box inside the buttons */
.litebtn svg{
  width: var(--icon-size) !important;
  height: var(--icon-size) !important;
  flex: 0 0 var(--icon-size);
  display: inline-block;
}

/* Give the buttons a little breathing room so label isn't cramped */
.litebtn{ gap: 8px; }
/* ---- ICONS: force a sane, non-shrinking size everywhere ---- */
:root{ --icon: 20px; }
@media (min-width: 640px){ :root{ --icon: 22px; } }
@media (min-width: 1024px){ :root{ --icon: 24px; } }

/* applies to the compact buttons */
.litebtn{
  gap: 8px;
  align-items: center;
  min-height: 38px;            /* make the button tall enough */
  line-height: 1.1;
}

/* 1) FORCE size + prevent flex shrinking */
.litebtn svg,
.controls .btn svg{
  width: var(--icon) !important;
  height: var(--icon) !important;
  flex: 0 0 var(--icon);
  display: inline-block;
  vertical-align: middle;
  max-width: none;              /* in case a reset set max-* to 100% */
  max-height: none;
  overflow: visible;
}

/* 2) If any global "svg { width:1em;height:1em }" exists, neutralize it here */
.litebtn svg, .controls .btn svg { width: var(--icon) !important; height: var(--icon) !important; }

/* 3) Keep strokes readable when scaling */
.litebtn svg, .controls .btn svg { vector-effect: non-scaling-stroke; }

/* Optional: make labels comfy on desktop */
@media (min-width: 1024px){
  .litebtn .label{ font-size: 14px; }
}

/* ---- ICON SIZING (never tiny) ---- */
:root{ --icon-size: 22px; }
@media (min-width:1024px){ :root{ --icon-size: 24px; } }

.litebtn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  min-height:38px;          /* ensures a decent click target */
  line-height:1.1;
}

/* fixed-size wrapper that cannot shrink */
.litebtn .icon{
  width: var(--icon-size);
  height: var(--icon-size);
  flex: 0 0 var(--icon-size);   /* no flex-shrinking */
  display:inline-flex;
  align-items:center;
  justify-content:center;
  line-height:0;                /* no stray line box */
}

/* force the SVG to fill the wrapper, overriding resets */
.litebtn .icon svg{
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  max-height: none !important;
  flex: none !important;
  overflow: visible;
  vector-effect: non-scaling-stroke;
}

/* If your buttons are still plain .btn inside .controls, cover those too */
.controls .btn .icon{ width: var(--icon-size); height: var(--icon-size); flex: 0 0 var(--icon-size); }
.controls .btn .icon svg{ width:100% !important; height:100% !important; max-width:none !important; max-height:none !important; }
/* kill the space under the toolbar */
.toolbar{ margin-bottom: 0 !important; }

/* kill the top margin on the controls bar when it follows the toolbar */
.toolbar + .controls{ margin-top: 0 !important; }


/* Combined toolbar: 3 rows × 3 columns; tools stick to the right spanning rows */
.toolbar.toolbar-combined{
  display: grid;
  grid-template-columns: 1fr 1fr auto;
  grid-template-areas:
      "league   sort"
      "autosubs   tools";
  gap: 10px;
  align-items: start;
  background: var(--card);
  padding: 8px 10px;
  border-radius: 12px;
  box-shadow: var(--ring);
  position: sticky; top: 0; z-index: 3;
  margin-bottom: 0 !important; /* keep .lfpl-thead flush under */
}

/* area hooks */
.toolbar .area-autosubs{ grid-area: autosubs; }
.toolbar .area-details{  grid-area: details; }
.toolbar .area-league{   grid-area: league; }
.toolbar .area-sort{     grid-area: sort; }
.toolbar .area-filter{   grid-area: filter; }
.toolbar .area-chips{    grid-area: chips; }
.toolbar .area-chips{display:none;}
.toolbar .area-tools{    grid-area: tools; display:flex; gap:8px; align-items:center; justify-content: space-evenly; }

/* tighten labels a touch */
.toolbar .label{ font-weight:700; color:#3a3f53; }

/* compact pills & buttons remain as before; ensure icons never shrink */
.toolbar .litebtn svg{
  width: var(--icon-size) !important;
  height: var(--icon-size) !important;
  flex: 0 0 var(--icon-size);
  vector-effect: non-scaling-stroke;
}

/* Responsive: stack to 2 columns on small screens, tools row last but right-aligned */
@media (max-width: 720px){
  .toolbar.toolbar-combined{
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "autosubs details"
      "league   sort"
      "filter   filter"
      "chips    chips"
      "tools    tools";
  }
  .toolbar .area-tools{ justify-content: flex-start; }
}
@media (max-width:640px){
  .toolbar.toolbar-combined{ padding:6px 8px; gap:8px; border-radius:10px; }
  .toolbar .label{ font-size:12px; }
  .seg button,.btn,.pill,.select{ padding:5px 8px; font-size: 11px !important;}
  :root{ --icon-size:18px; }
}

  .toolbar.toolbar-combined{
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "autosubs details"
      "league   sort"
      "tools   tools";     /* chips line merged (see #5) */

}
@media (max-width:640px){
  #activeChips{ display:flex; gap:6px; overflow:auto; -webkit-overflow-scrolling:touch; width:150%; }
  #activeChips .chip{ white-space:nowrap; }
  .toolbar .area-chips{ display:none; } /* we won’t use the extra row */
}

  .area-league .label{ display:none; }
  .area-league .select{ min-width: 0; width: 100%; }


#viewModeSeg button{ padding:6px 10px; }
#viewModeSeg .active{ color:#0f172a; background:#fff;opacity:1 }

/* rows to be hidden when in "Filter" mode */
.row.hidden-by-filter{ display:none !important; }
:root{
  --row-hl: #f9fafb;  /* very light gray */
}

.row.selected{
  background-color: #e0f0ff;             /* light blue */
  box-shadow: 0 2px 6px rgba(0,0,0,.1);
}


.chip-colored{
  background-color: #e0f0ff!important;             /* match row highlight */

}

/* Global search popover */
.search-popover{
  position:absolute; inset:auto 0 auto auto;  /* align at right inside tools area */
  background:#fff; border:1px solid var(--ui-b); border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.12); padding:8px; z-index:6;
  min-width:240px;
}
.search-popover input{
  width:100%; border:1px solid var(--ui-b); border-radius:8px; padding:8px 10px;
}
.row.hidden-by-search{ display:none !important; }
#awardsBody{
  display:grid; gap:12px;
}
.award{
  background:#f9fafc; border:1px solid var(--ui-b);
  padding:10px 12px; border-radius:8px;
  display:flex; justify-content:space-between; align-items:center;
}
.award .title{ font-weight:700; }
.award .winner{ font-style:italic; color:#0f172a; }
.award.good { border-left:4px solid var(--ok); }
.award.bad  { border-left:4px solid var(--bad); }
/* --- Fancy Trophy Cards --- */
.awards-grid{
  display:grid;
  gap:12px;
}
@media (min-width:640px){
  .awards-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (min-width:980px){
  .awards-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}

.award-card{
  position:relative;
  border-radius:16px;
  padding:14px 12px 12px 12px;
  color:#0f172a;
  border:1px solid rgba(0,0,0,.06);
  box-shadow: 0 6px 20px rgba(0,0,0,.08);
  overflow:hidden;
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  isolation:isolate; /* keeps shine under badge */
}
.award-card.good{
        height: max-content;
  background: linear-gradient(180deg, #f0fff7, #e8fff7);
  border-color: rgba(16,185,129,.25);
}
.award-card.bad{
        height: max-content;
  background: linear-gradient(180deg, #fff5f5, #ffecec);
  border-color: rgba(239,68,68,.25);
}
.award-card.quirk{
        height: max-content;
  background: linear-gradient(180deg, #f8f7ff, #f3f2ff);
  border-color: rgba(99,102,241,.25);
}

/* ribbon corner */
.award-card::before{
  content:"";
  position:absolute; top:-18px; right:-50px;
  width:160px; height:80px;
  background: rgba(0,0,0,.06);
  transform: rotate(30deg);
  border-radius: 10px;
  filter: blur(4px);
  z-index:0;
}
.award-card.good::before{ background: linear-gradient(90deg, rgba(16,185,129,.18), rgba(16,185,129,.06)); }
.award-card.bad::before{ background: linear-gradient(90deg, rgba(239,68,68,.18), rgba(239,68,68,.06)); }
.award-card.quirk::before{ background: linear-gradient(90deg, rgba(99,102,241,.18), rgba(99,102,241,.06)); }

/* subtle top shine */
.award-card::after{
  content:"";
  position:absolute; inset:0 0 auto 0; height:38%;
  background: linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,0));
  pointer-events:none;
  z-index:0;
}

/* layout */
.award-head{
  display:flex; align-items:center; gap:10px; position:relative; z-index:1;
}
.award-icon{
  width:44px; height:44px; border-radius:999px;
  display:grid; place-items:center;
  background:#fff; box-shadow: 0 2px 8px rgba(0,0,0,.08), inset 0 0 0 1px var(--ui-b);
  flex: 0 0 44px;
}
.award-icon svg{ width:26px; height:26px; }

.award-txt{ min-width:0; }
.award-title{ font-weight:800; line-height:1.18; }
.award-desc{ font-size:12px; color:#6b7280; }

.award-win{
  margin-top:8px; font-weight:700;
  background:#fff; border:1px solid var(--ui-b);
  padding:6px 10px; border-radius:999px; display:inline-block;
  position:relative; z-index:1;
}

/* colored icon rings */
.award-card.good .award-icon{ box-shadow: 0 2px 8px rgba(0,0,0,.08), inset 0 0 0 2px rgba(16,185,129,.35); }
.award-card.bad .award-icon{  box-shadow: 0 2px 8px rgba(0,0,0,.08), inset 0 0 0 2px rgba(239,68,68,.35); }
.award-card.quirk .award-icon{box-shadow: 0 2px 8px rgba(0,0,0,.08), inset 0 0 0 2px rgba(99,102,241,.35); }

/* confetti burst */
@keyframes confetti {
  0% { transform: translateY(0) rotate(0); opacity:1; }
  80%{ opacity:1; }
  100%{ transform: translateY(40px) rotate(180deg); opacity:0; }
}
.confetti{
  pointer-events:none; position:absolute; inset:0; z-index:2;
}
.confetti i{
  position:absolute; width:6px; height:8px; border-radius:2px;
  animation: confetti 900ms ease-out forwards;
  opacity:0;
}
/* --- Mobile-safe layout for Awards --- */
#awardsBody.awards-grid{
  padding: 8px 6px;           /* breathing room from modal edges */
}

/* Always 1 column on small screens */
@media (max-width: 640px){
  #awardsBody.awards-grid{
    display: grid;
    grid-template-columns: 1fr !important;
    gap: 10px;
  }

  /* keep cards fully in-bounds */
  .award-card{
    border-radius: 12px;
    padding: 12px 10px;
    box-shadow: 0 4px 14px rgba(0,0,0,.08);
  }

  /* shrink icon + text for small widths */
  .award-icon{ width: 40px; height: 40px; flex: 0 0 40px; }
  .award-icon svg{ width: 22px; height: 22px; }
  .award-title{ font-size: 15px; }
  .award-desc{ font-size: 12px; }
  .award-win{ font-size: 13px; }

  /* tame the decorative ribbon so it doesn't poke out */
  .award-card::before{
    top: -22px; right: -48px;
    width: 140px; height: 70px;
    transform: rotate(28deg);
  }
}

/* Prevent any accidental horizontal scrolling in the modal */
#awardsModal .modal-body{
  overflow: auto !important;
}
#awardsModal .modal-content{
  max-width: 96vw;   /* already in your general mobile rules; safe here too */
}

/* make each move look like a chip */
.transfers{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap:6px;
  align-items:start;
  overflow:visible;           /* let it wrap instead of clipping/scrolling */
  font-size:12px;
}

.transfers .xfer{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:var(--ui);
  border:1px solid var(--ui-b);
  padding:4px 8px;
  border-radius:999px;
  white-space:nowrap;         /* keep each pair on one line */
      width: max-content;
}

/* the old inline separator dots become unnecessary in grid layout */
.transfers .dot{ display:none; }

/* optional: make (out → in [+Δ]) read a bit clearer */
.transfers .out{ color:var(--bad); text-decoration:line-through; }
.transfers .in { color:#0f172a; font-weight:700; }

/* a touch wider on big screens */
@media (min-width: 980px){
  .transfers{ grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
}

/* Force the Awards modal body into exactly 2 equal columns */
#awardsBody.awards-grid {
  display: grid;
  grid-template-columns: 1fr 1fr !important;  /* equal halves */
  gap: 12px;
}

/* On mobile: revert to single column */
@media (max-width: 640px){
  #awardsBody.awards-grid {
    grid-template-columns: 1fr !important;
  }
}
/* Make transfers wrap only when needed and pack tightly */
.transfers{
  display: flex;
  flex-wrap: wrap;              /* ← allow wrapping only at container edge */
  gap: 6px 10px;                /* row/column spacing */
  align-items: center;
  min-width: 0;
  overflow: visible;            /* ← stop clipping when wrapping */
}

.xfer{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;          /* keep “OUT → IN” together */
}

/* Replace the inline dot spans with a separator that “sticks” to the chip */
.transfers .dot{ display: none; }                 /* hide existing dot nodes */
.xfer:not(:first-child)::before{
  content: "•";
  opacity: .45;
  margin-right: 6px;
}
/* Transfers container: flex row that wraps only if needed */
.transfers{
  display:flex;
  flex-wrap:wrap;
  gap:6px;                        /* consistent spacing with chips */
  align-items:center;
  margin-top:4px;
}

/* Each transfer looks like a chip pill */
.transfers .xfer{
  display:inline-flex;
  align-items:center;
  gap:6px;
  white-space:nowrap;
  background:var(--chip);
  border:1px solid var(--chip-b);
  border-radius:6px;
  padding:3px 6px;
  font-size:11px;                 /* same as .chip */
  line-height:1.2;
  margin:2px 0;                   /* breathing space top/bottom */
}

/* Style for OUT / IN */
.xfer .out{ color:var(--bad); text-decoration:line-through; }
.xfer .in { color:#0f172a; font-weight:700; }

/* Kill the old dot separator entirely */
.transfers .dot{ display:none !important; }

/* Also kill our earlier ::before dot rule */
.transfers .xfer::before{ content:none !important; }

/* space between KPI block and transfers row, and fix the grid */
.strip{
  /* was: grid-template-columns:auto auto 1fr; */
  grid-template-columns: auto 1fr;   /* just KPIs + the rest */
  column-gap: 8px;                   /* <-- adds gap before first transfer */
  align-items: center;               /* keep vertical centering */
}

/* transfers row: no extra offset, align to KPIs */
.transfers{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  align-items:center;   /* baseline alignment with .kpis */
  margin:0;             /* <-- no accidental push down */
}

/* make transfer pills match KPI chip height/line-height */
.transfers .xfer{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:1px 5px;      /* match .kpi */
  line-height:1;        /* match .kpi line height */
  font-size:11px;       /* match .kpi font size */
  background:var(--chip);
  border:1px solid var(--chip-b);
  border-radius:999px;  /* same look as KPI */
}

/* keep OUT/IN colors */
.xfer .out{ color:var(--bad); text-decoration:line-through; }
.xfer .in { color:#0f172a; font-weight:700; }
/* 1) let the transfers flex-row actually wrap and be visible */
.transfers{
  display:flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
  overflow: visible;     /* was hidden -> caused clipping */
  max-width: 100%;
  min-width: 0;          /* important inside CSS grid on iOS */
  margin-left: 0;        /* avoid accidental nudge on small widths */
}

/* keep each chip intact but allow the row to wrap */
.transfers .xfer{
  white-space: nowrap;
  padding:3px 5px;
}

/* 2) grid child min-width fix (Safari/iOS) */
.strip .kpis,
.strip .transfers{
  min-width: 0;          /* prevents flex children from overflowing/clipping */
}

/* 3) small screens: stack the transfers under KPIs if space is tight */
@media (max-width: 640px){
  .strip{
    grid-template-columns: 1fr;  /* put transfers on the next line */
    row-gap: 6px;
    align-items: start;
  }
}

/* 1) Make the emoji position consistent on all devices */
.table-player { position: relative; }
.eo-badge{
  position: absolute;
  top: 6px;           /* was bottom/right % — those shift on mobile */
  right: 6px;
  font-size: 14px;    /* scales predictably */
  line-height: 1;
  margin: 0;
  z-index: 2;
  pointer-events: none;
  transform: translateZ(0); /* stops tiny subpixel jitters */
}
@media (min-width: 641px){
  .eo-badge{ font-size: 16px; }
}

/* 2) Anchor the (C)/(TC) badge to the TILE, not the emoji element.
   Modern Safari/Chrome support :has(); this keeps layout stable. */
.table-player:has(.label_cap)::after,
.table-player:has(.label_tcap)::after{
  position: absolute;
  top: 26px;
  right: 40%;        /* leaves space so it doesn’t collide with the emoji */
  font-weight: 800;
  font-size: 10px;
  border-radius: 6px;
  padding: 1px 4px;
  line-height: 1;
  z-index: 2;
  background: black;
  color:white;
  border: 1px solid #dfe3ea;
  content: 'C';
}
.table-player:has(.label_tcap)::after{
  content: 'TC';
  background: #fff;
  color: black;
  border-color: #ffe08a;
}
.table-player-played {
    background-color: var(--light-grey);
    color: var(--black);
}
.gw-stack
{
    font-weight: 700;
}
.table-player-percent {
    background-color: var(--light-green);
}
/* keep the player tile as positioning context */
.table-player { position: relative; }

/* emoji badge — always top-right corner, scales with tile */
.eo-badge{
  position: absolute;
  top: 5%;          /* % of tile height */
  right: 5%;        /* % of tile width */
  font-size: clamp(0.75rem, 2.5vw, 3rem); /* scales across devices */
  line-height: 1;
  z-index: 2;
  pointer-events: none;
}





/* consistent with your .btn base, but larger + blue accent */
.redownload-btn{
  font-size: 10px;
  font-weight: 600;
  padding: 10px 14px;
  border-radius: 8px;
  background-color: #5bc0de;
  color: #fff;
  border: 1px solid transparent;
  cursor: pointer;
  width: 50%;             /* or 100% if you want full-width */
  display: block;
  margin: 12px auto;      /* center in its container */
  text-align: center;
}
.redownload-btn:hover{
  background-color: #46b8da;
}

/* One sticky unit under the main toolbar */
.league-sticky{
  position: sticky;
  top: var(--toolbar-offset, 0px);
  z-index: 4;                    /* above rows, below modals */
  background: var(--card, #fff);
  border: 1px solid var(--ui-b, #e5e7eb);
  border-radius: 12px;
  box-shadow: var(--ring, 0 1px 4px rgba(17,24,39,.06));
  margin: 6px 0 8px;
  overflow: hidden;              /* tidy corners */
}

/* The league bar sits on top; header band sits just under it */
.league-sticky > .league-bar{
  padding: 8px 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* When .lfpl-thead lives inside the sticky wrapper, don't be sticky twice */
.league-sticky .lfpl-thead{
  position: static !important;   /* cancel previous sticky */
  margin: 0;
  border: 0;
  border-top: 1px solid var(--ui-b, #e5e7eb);
  border-radius: 0;              /* wrapper already has radius */
  box-shadow: none;
  padding: 6px 10px;
}


.lfpl-thead-cell{
  font-weight: 800;
  color: #0f172a;

  letter-spacing: .02em;
  font-size: 12px;
  line-height: 1.2;
}

/* Optional: tighter on small screens */
@media (max-width:640px){
  .league-sticky > .league-bar{ padding: 6px 8px; gap: 8px; }
  .league-sticky .lfpl-thead{ padding: 6px 8px; }
}


/* by default show desktop version, hide mobile */
.gw-mobile{ display:none; }

/* on small screens, swap */
@media (max-width:640px){
  .gw-hit{ display:none; }
  .gw-mobile{ display:inline; }
  .gw-stack {display:grid;}
  .gw-cell small{ color:#b91c1c; font-weight:600; }
}

:root {
  --col-rank:   10%;   /* enough for ▲▼ + rank number */
  --col-id:     35%;  /* team + manager + chips */
  --col-cap:  15%;
  --col-gw:     10%;   /* gw/hit/net */
  --col-total:  10%;   /* total points */
  --col-toplay:10%
}

/* apply same grid to header and rows */

.row-header {
  display: grid;
  grid-template-columns:
    var(--col-rank)
    var(--col-id)
    var(--col-toplay)
    var(--col-cap)
    var(--col-gw)
    var(--col-total);
  align-items: center;

}
@media (max-width: 640px){
  :root {
    --col-rank: 50px;
        --col-id: auto;
        --col-gw: 40px;
        --col-cap: 60px;
        --col-total: 48px;
        --col-toplay: 25px;
  }
.lfpl-thead-grid{ grid-template-columns: var(--col-rank) 106px 57px 31px 34px 39px!important; }
}
/* let header cells shrink inside the grid */
.row-header > * { min-width: 0; }

/* a reusable “clip to …” helper */
.cell-clip{
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  min-width: 0;          /* belt-and-suspenders for flex/grid */
}

/* optional: also ellipsis team + manager lines */
.row-header .team-name,
.row-header .manager {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}


.lfpl-thead{
  position: sticky;
  top: var(--sticky-under-toolbar, 56px); /* will be set by JS based on your toolbar */
  z-index: 4;                             /* above rows, below any dropdowns */
  background: var(--card);
  border: 1px solid var(--ui-b);
  border-radius: 10px;
  box-shadow: var(--ring);
  margin: 6px 0 8px;
  padding: 6px 10px;
}

.lfpl-thead-grid{
    width:100%;
  display:grid;
  grid-template-columns:
    var(--col-rank)
    var(--col-id)
    var(--col-toplay)
    var(--col-cap)
    var(--col-gw)
    var(--col-total);
  column-gap: var(--row-gap);
  align-items:center;
}
/* Header cell styling */
.lfpl-thead .th{
  font-weight: 800;
  color: #0f172a;

  letter-spacing: .02em;
  font-size: 12px;
  text-align: left;              /* align LEFT per your request */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;       /* … if too long */
}

.th
{
    font-weight:700;
}

.my-thead .th.sortable::after{
  content:"";
  position:absolute;
  right:2px;
  top:50%;
  width:0; height:0;
  border-left:4px solid transparent;
  border-right:4px solid transparent;
  border-top:6px solid transparent;
  border-bottom:6px solid transparent;
  transform: translateY(-50%);
  opacity:.35;
}

/* ascending ▲ */
.my-thead .th.sort-asc::after{
  content:"";
  border-top:6px solid #6b7280;
  border-bottom:0;
  opacity:.9;
}

/* descending ▼ */
.my-thead .th.sort-desc::after{
  content:"";
  border-bottom:6px solid #6b7280;
  border-top:0;
  opacity:.9;
}



.my-thead .th.sortable{ position:relative; cursor:pointer; }
.my-thead .th.sortable::after{
  content:"";
  position:absolute; right:-3px; top:50%;
  width:0; height:0; transform:translateY(-50%);
  border-left:4px solid transparent; border-right:4px solid transparent;
  border-top:6px solid transparent; border-bottom:6px solid transparent; opacity:.35;
}
/* ▲ */
.my-thead .th.sort-asc::after{ border-top:6px solid #6b7280; border-bottom:0; opacity:.9; }
/* ▼ */
.my-thead .th.sort-desc::after{ border-bottom:6px solid #6b7280; border-top:0; opacity:.9; }
/* ascending ▲ */
.my-thead .th.sort-asc::after{
  content:"";
  border-bottom:6px solid #6b7280; /* was border-top */
  border-top:0;
  opacity:.9;
}

/* descending ▼ */
.my-thead .th.sort-desc::after{
  content:"";
  border-top:6px solid #6b7280;    /* was border-bottom */
  border-bottom:0;
  opacity:.9;
}
/* subtle highlight */
.highlight2 {
  background: linear-gradient(90deg, #22d3ee 0%, #6366f1 100%); /* cyan → indigo */
  color: #fff;                /* make text white */
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
}
.footer-signup-button {
    height:unset!important;
}
#compareModal .table-club-shirt
{
    margin-bottom:-0.7rem;
}
.table-player-bench {
    background-color: black!important;
    color: var(--white);
}
.rank-wrap {
  display: inline-flex;
  align-items: start; /* arrow block and rank stay centered vertically */
  gap: 4px;            /* spacing between them */
}
/* Make them a compact row */
.rank-wrap{
  display:inline-flex;
  align-items:center;           /* rank vertically centered to arrow middle */
  gap:4px;                      /* << keep them close */
}

/* Fix the “arrow column” width the same across rows */
.trend{
  display:inline-flex;
  flex-direction:column;
  align-items:center;
  line-height:1;
  width:18px;                   /* << fixed column width keeps arrows aligned */
  flex:0 0 18px;                /* don’t grow/shrink */
}

/* Arrow image box (fixed height so centering is stable) */
.trend .arrow{
  width:18px; height:18px;      /* << lock size */
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;
}
.trend.up   .arrow{ background-image:url('https://livefpl.us/figures/up.png'); }
.trend.down .arrow{ background-image:url('https://livefpl.us/figures/down.png'); }
.trend.same .arrow{ background-image:url('https://livefpl.us/figures/same.png'); }

/* Delta under arrow; placeholder keeps height when empty */
.trend .delta{
  font-size:.52em;
  margin-top:2px;
  line-height:1;
  color:var(--muted,#6f7790);
}
.trend .delta.placeholder{ visibility:hidden; }  /* reserves space, no text */

/* Optional: ensure the cell itself isn’t spreading content apart */
.rank-wrap, .rank-wrap *{
  margin:0;
}

.id .captain
{
    font-weight:bold;
}
.id .vice {
  font-size: 0.65em;      /* smaller than captain */
  margin-top: 2px;        /* spacing below captain */
  color: var(--muted, #6f7790);
}

.highlight2 .vice
{
    color:white;
}

</style>
</head>
<body data-league="Fantasy XXL" data-gw="4">

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129091044-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129091044-1');
</script>



<!DOCTYPE html>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

<style>
/* Hide the secondary menu by default */
.secondary-menu {
    display: none;
    position: absolute;
    top: 100%; /* Aligns the dropdown below the parent */
    right: -15%;
    background: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000;

    justify-content: space-around;
    background-color:#0f172a;
}

.secondary-menu2 {
   left:-140%;
   right:unset;
}
.secondary-menu2 .nav-link {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: var(--darkest-white);
    font-size: 14px;
}
/* Dropdown link container */
.nav-link.dropdown {
    position: relative;
    display: inline-block;
}

/* Show the secondary menu when hovering over the parent link */
.nav-link.dropdown:hover .secondary-menu {
    display: flex;
}

.ccpa-msg-added
  {
      color:black!important;
      display:none!important;
  }

/* Styling the secondary menu links */
.secondary-menu .nav-link {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: var(--darkest-white);
    font-size: 14px;
}
.secondary-menu2 .nav-link {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: var(--darkest-white);
    font-size: 12px;
}
.secondary-menu .nav-link:hover {
    background: #f0f0f0;
    color: #000;
}

.fixed-navigation {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 10000; /* high z-index to keep it above other content */
    background-color:#0f172a;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.navigation-topnav {
    width: 100%;
    text-align: center;
    font-size: 0.6rem;
    padding: 2px 0; /* Ensure some padding around the text */
    background-color: #0f172a;
}

.navigation-container {
    display: flex;
    justify-content: space-around;
    background-color:#0f172a;

}

.nav-link {
    text-decoration: none;
    color: var(--darkest-white);
    text-align: center;
}

.nav-link i {
    font-size: 20px;
    display: block;
}

.nav-link span {
    font-size: 12px;
}

.nav-link:hover, .nav-link:focus {
    color: #007bff;
    
}

</style>

<div class="fixed-navigation">
    <div class="navigation-topnav">
        <a href="/rank" class="nav-logo-box">
            <img class="nav-img" style="height:1.6rem;width:9rem" src="https://livefpl.us/figures/livefpllogo.png" alt="livefpl logo">
            <p style="color:white;display:none">Live rank, leagues, price changes, stats and transfer planning!</p>
        </a>
    </div>
    <div class="navigation-container" style="padding: 10px;">
    <a href="../rank" class="nav-link">
        <i class="fas fa-chart-line"></i>
        <span>Rank</span>
    </a>
    <div class="nav-link dropdown">
    <a href="../leagues" class="nav-link">
        <i class="fas fa-trophy"></i>
        <span>Leagues</span>
        </a>
        <div class="secondary-menu secondary-menu2">


            <a href="../leagues" class="nav-link">Live Leagues</a>
            <a href="../league_stats" class="nav-link">League Stats</a>
            <a href="../league_ownership" class="nav-link">League Combinations</a>
            <a href="../favorites" class="nav-link">Favorite Managers</a>
            <a href="../elite" class="nav-link">Elite Managers</a>

        </div>
        </div>

    <a href="../prices" class="nav-link">
        <i class="fas fa-dollar-sign"></i>
        <span>Prices</span>
    </a>
    <a href="../plan" class="nav-link" >
        <i class="fas fa-calendar"></i>
        <span>Planner</span>
    </a>
    <a href="../games" class="nav-link">
        <i class="fas fa-futbol"></i>
        <span>Games</span>
    </a>
    <div class="nav-link dropdown">
        <a href="#" class="nav-link">
            <i class="fas fa-chart-bar"></i>
            <span>Statistics</span>
        </a>
        <!-- Secondary Menu -->
        <div class="secondary-menu">


            <a href="../dgw" class="nav-link">DGW Ownership</a>
            <a href="../combos" class="nav-link">Ownership Combinations</a>
            <a href="../chips" class="nav-link">Chips & Templates</a>
            <a href="../EO" class="nav-link">Effective Ownerships</a>

        </div>
    </div>
</div>

</div>


    <div class="addmargin" style="margin-bottom:150px"></div>


    <div>
<!--  [Desktop/Tablet]leaderboard_atf -->
<div data-pw-desk="leaderboard_atf" id="pwDeskLbAtf"></div>
<script type="text/javascript">
  window.ramp.que.push(function () {
      window.ramp.addTag("pwDeskLbAtf");
  })
</script>
<!--  [Mobile]leaderboard_atf -->
<div data-pw-mobi="leaderboard_atf" id="pwMobiLbAtf"></div>
<script type="text/javascript">
  window.ramp.que.push(function () {
      window.ramp.addTag("pwMobiLbAtf");
  })
</script>
</div>

<div class="wrap">
<button id="toggleDesignBtn" style="background: var(--card, #fff);
  color: var(--ink, #1d2330);
  border: 1px solid var(--muted, #d1d5db);
  margin-bottom:1%;
  border-radius: 8px;
  padding: 6px 12px;
  font-size: 0.875rem;      /* small, concise */
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;">Don't like the new look? Switch to old design</button>

<script>
document.getElementById("toggleDesignBtn").addEventListener("click", () => {
  fetch("/choose_design", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: "{}"                      // <— add this
  }).then(() => location.reload());
});

</script>
  <!-- ===== COMBINED STICKY TOOLBAR (compact) ===== -->
<div class="toolbar toolbar-combined">
  <!-- Row 1: toggles -->
  <!-- replace autosubs minigroup on mobile only -->
<div class="minigroup area-autosubs" data-mobile>
  <div class="seg" role="group" aria-label="Autosubs">
    

      <button type="button" onclick="include_subs(1)">On</button>
      <button type="button" class="active">Autosubs Off</button>
    
  </div>
</div>





  <!-- Tools stack at the right, spanning all rows -->
  <div class="area-tools tools">
    <button class="btn litebtn" id="openEO" title="Ownership / Captains" aria-label="Ownership / Captains">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21.21 15.89A10 10 0 1 1 12 2v10z"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>
      </svg>
    </button>
    <button class="btn litebtn" id="openCompare" title="Compare two teams" aria-label="Compare two teams">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 7h6l-3 7-3-7Zm12 0h6l-3 7-3-7Z"></path><path d="M6 4h12M12 4v16M9 20h6"></path>
      </svg>
    </button>
    <button class="btn litebtn" id="exportCSV" title="Export to Excel" aria-label="Export to Excel">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <path d="M7 10l5 5 5-5"></path><path d="M12 15V3"></path>
      </svg>
    </button>
    <!-- unobtrusive search toggle -->
  <button class="btn litebtn" id="filterToggle" title="Search table (⌘/Ctrl+K)" aria-label="Search table">


    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.3-4.3"></path>
    </svg>
  </button>
<button class="btn litebtn" id="openAwards" title="Awards of the Week" aria-label="Awards of the Week">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M8 21h8M12 17v4"></path>
    <path d="M7 4h10v4a5 5 0 0 1-10 0V4Z"></path>
    <path d="M5 8A3 3 0 0 1 2 5V4h3"></path>
    <path d="M19 8a3 3 0 0 0 3-3V4h-3"></path>
  </svg>
</button>

<div class="minigroup area-details" style="justify-content:center">
  <div class="seg" role="group" aria-label="Compact view">
    <button type="button" id="stripOff">Compact View</button>
    <button type="button" id="stripOn" class="active">Detailed View</button>
  </div>
</div>

  </div>

  <!-- Row 2: selects -->
  <div class="minigroup area-league">
    <span class="label">Active League</span>
    <select class="select" onchange="window.location='../leagues/'+this.value;">
      <option>Choose a League</option>
      
        
      
    </select>
  </div>

  <div class="minigroup area-sort">

    <div style="display:flex; gap:8px; align-items:center;">
      <select id="sortBy" class="select" style="flex:1;">
        <option value="total" selected>Total</option>
        <option value="gw">GW Net Score</option>
        <option value="gwgross">GW Gross Score</option>
        <option value="played_rem">Players Remaining</option>
        <option value="or">Overall Rank</option>
        <option value="ft">Free Transfers</option>
        <option value="tv">Team Value</option>
        <option value="activechip">Active Chip</option>
      </select>
      <button id="orderBtn" data-order="desc" class="btn">Sort ▼</button>
    </div>
  </div>



  <div class="minigroup area-chips" >
    <div id="activeChips" class="chipsline" aria-live="polite" ></div>
  </div>
</div>
<!-- ===== END COMBINED TOOLBAR ===== -->




<div id="filterPopover" class="filter-popover" hidden role="dialog" aria-modal="true" aria-labelledby="filterHeading">
  <h3 id="filterHeading" class="sr-only">Search & Filter</h3>

  <!-- Search row (moved here) -->
  <div class="filter-row">
    <label for="globalSearch">Search</label>
    <div id="searchPopover" >
    <input id="globalSearch" type="search" placeholder="Search" autocomplete="off" />
  </div>
  </div>



  <!-- Existing filter controls -->
  <div class="filter-row" style="grid-template-columns: 130px 1fr;">
    <label for="filterType">Or find managers who</label>
    <select id="filterType"  style="    height: fit-content;">
      <option value="own">own</option>
      <option value="started">started</option>
      <option value="benched">benched</option>
      <option value="captained">captained</option>
    </select>
  </div>

  <div class="filter-row">
    <label for="filterPlayer">Player</label>
    <select id="filterPlayer"><option value="">Choose Player</option></select>
  </div>

  <div class="filter-row">
    <label for="sampleN">In sample</label>
    <select id="sampleN"></select>
  </div>

  <label></label>
  <div class="seg" role="group" aria-label="View mode" id="viewModeSeg">
    <button type="button" id="modeColor">Color them, keep all</button>
    <button type="button" id="modeFilter">Don't color, just filter</button>
  </div>

  <span id="countPill" class="countpill" hidden>Count: 0/0 = 0.00%</span>

  <div class="filter-actions">
    <button id="clearFilters" class="btn-ghost">Clear</button>
    <button id="applyFilters" class="btn-primary">Apply</button>
  </div>
</div>


  <!-- ===== League list (Jinja-rendered) ===== -->

 <div class = "my-thead" style="background: #0f172a;

    margin-bottom:4px;
    margin-top:4px;
    position:sticky;
    z-index:4;
    overflow: hidden;
        top: var(--sticky-under-toolbar, 56px);

}">

     <div style="text-align: center;
    font-weight: 700;color:var(--darkest-white)!important"><span>Fantasy XXL — Live Gameweek 4 Table</span></div>
 <div class="row-header" style="color:var(--darkest-white)!important">
            <!-- Position -->
            <div class="th sortable " data-key="rank">Pos</div>
    <div class="th">Manager</div> <!-- (disabled by default; see note) -->
    <div class="th sortable" data-key="played_rem" style="text-align:center;">Yet</div>
    <div class="th sortable" data-key="captain"  style="text-align:center;">(C)</div>
    <div class="th sortable" data-key="gw"         style="text-align:center;">GW</div>
    <div class="th sortable sort-desc" data-key="total"      style="text-align:center;">Total</div>



          </div>
</div>
<div class="lfpl-list" id="lfplList">

    
    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="8215911"
        data-total="181"
        data-gw="7"
        data-hit="0"
        data-gwgross = "7"
        data-played="5"
        data-played_rem = "7"
        data-or="1871465"
        data-ft="1"
        data-tv="100.9"
        data-rank="1"
        data-trend="0"
        data-activechip="WC"
        data-captain = "Mateta"
        data-used = "[&#39;BB&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">1</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/8215911/event/4">
                  <div class="team-name">Namdzai</div>
                  </a>
              <div class="manager">
                Nguyen Nam

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">Mateta (C). To Play: 7</span>
              <span class="badge soft" style="width:128px;display:none">VC: João Pedro</span>

              <div class="chips">

                
                
                  
                  <span class="chip active">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip used">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>1,871,465</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">7</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">Mateta</div>
  <div class="vice">João Pedro</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">7</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>181</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>1,871,465</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.9</span>
              <span class="kpi"><b>Played</b>5/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Nguyen Nam"
                    onclick="favorite(event, 8215911, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 8215911, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_8215911" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            

            
            
              
            

            

            <div class="transfers">
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_*Pickford*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pickford
                </h5>

                <p class="table-player-percent base *Pickford*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Muñoz*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Muñoz
                </h5>

                <p class="table-player-percent base *Muñoz*">0%</p>
                <p class="table-player-live">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*Chalobah*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Chalobah
                </h5>

                <p class="table-player-percent base *Chalobah*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Pedro Porro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pedro Porro
                </h5>

                <p class="table-player-percent base *Pedro Porro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Gakpo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gakpo
                </h5>

                <p class="table-player-percent base *Gakpo*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Semenyo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Semenyo
                </h5>

                <p class="table-player-percent base *Semenyo*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Johnson*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Johnson
                </h5>

                <p class="table-player-percent base *Johnson*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_*Reijnders*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Reijnders
                </h5>

                <p class="table-player-percent base *Reijnders*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="8215911_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Mateta* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Mateta (C)
                </h5>

                <p class="table-player-percent base *Mateta*">0%</p>
                <p class="table-player-live">2</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8215911_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Isak*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Isak
                </h5>

                <p class="table-player-percent base *Isak*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8215911_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Henderson
                </h5>

                <p class="table-player-percent base *Henderson*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8215911_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Grealish
                </h5>

                <p class="table-player-percent base *Grealish*">0%</p>
                <p class="table-player-bench">2</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8215911_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Cucurella
                </h5>

                <p class="table-player-percent base *Cucurella*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8215911_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Van de Ven
                </h5>

                <p class="table-player-percent base *Van de Ven*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="3977951"
        data-total="161"
        data-gw="17"
        data-hit="0"
        data-gwgross = "17"
        data-played="7"
        data-played_rem = "5"
        data-or="4803510"
        data-ft="1"
        data-tv="100.5"
        data-rank="2"
        data-trend="0"
        data-activechip=""
        data-captain = "M.Salah"
        data-used = "[&#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">2</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/3977951/event/4">
                  <div class="team-name">Morningstar FC</div>
                  </a>
              <div class="manager">
                Nam Morningstar

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">M.Salah (C). To Play: 5</span>
              <span class="badge soft" style="width:128px;display:none">VC: Sarr</span>

              <div class="chips">

                
                
                  
                  <span class="chip used">WC</span>
                
                  
                  <span class="chip used">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>4,803,510</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">5</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">M.Salah</div>
  <div class="vice">Sarr</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">17</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>161</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>4,803,510</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.5</span>
              <span class="kpi"><b>Played</b>7/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Nam Morningstar"
                    onclick="favorite(event, 3977951, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 3977951, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_3977951" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            
              
              
                
              
            

            
            
              
            
              
                
              
            

            

            <div class="transfers">
              
                
                
                <span class="xfer"
                      data-in-id="381"
                      data-out-id="450">
                  <span class="out">Cunha</span>
                  <span class="arrow">→</span>
                  <span class="in">M.Salah</span>
                </span>
                
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_*Pickford*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pickford
                </h5>

                <p class="table-player-percent base *Pickford*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/15.png"
                     
                     alt="club shirt">



                <p class="label_*Livramento*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Livramento
                </h5>

                <p class="table-player-percent base *Livramento*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/5.png"
                     
                     alt="club shirt">



                <p class="label_*Van den Berg*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Van den Berg
                </h5>

                <p class="table-player-percent base *Van den Berg*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Van de Ven*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Van de Ven
                </h5>

                <p class="table-player-percent base *Van de Ven*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Semenyo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Semenyo
                </h5>

                <p class="table-player-percent base *Semenyo*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Johnson*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Johnson
                </h5>

                <p class="table-player-percent base *Johnson*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="3977951_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*M.Salah* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  M.Salah (C)
                </h5>

                <p class="table-player-percent base *M.Salah*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_*Anderson*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Anderson
                </h5>

                <p class="table-player-percent base *Anderson*">0%</p>
                <p class="table-player-played">4</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Sarr*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Sarr
                </h5>

                <p class="table-player-percent base *Sarr*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Gyökeres*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gyökeres
                </h5>

                <p class="table-player-percent base *Gyökeres*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="3977951_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_*Wood*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Wood
                </h5>

                <p class="table-player-percent base *Wood*">0%</p>
                <p class="table-player-played">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="3977951_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Dúbravka
                </h5>

                <p class="table-player-percent base *Dúbravka*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="3977951_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Milenković
                </h5>

                <p class="table-player-percent base *Milenković*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="3977951_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/5.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Morgan
                </h5>

                <p class="table-player-percent base *Morgan*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="3977951_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/17.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Reinildo
                </h5>

                <p class="table-player-percent base *Reinildo*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="7943291"
        data-total="125"
        data-gw="-6"
        data-hit="-24"
        data-gwgross = "18"
        data-played="7"
        data-played_rem = "5"
        data-or="8898520"
        data-ft="1"
        data-tv="100.4"
        data-rank="3"
        data-trend="0"
        data-activechip=""
        data-captain = "M.Salah"
        data-used = "[&#39;WC&#39;, &#39;BB&#39;, &#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">3</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/7943291/event/4">
                  <div class="team-name">savapain</div>
                  </a>
              <div class="manager">
                Doan Trung Tung

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">M.Salah (C). To Play: 5</span>
              <span class="badge soft" style="width:128px;display:none">VC: Ekitiké</span>

              <div class="chips">

                
                
                  
                  <span class="chip">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>8,898,520</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">5</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">M.Salah</div>
  <div class="vice">Ekitiké</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">18</span>
                
                  <span class="gw-hit"> (-24)=-6 </span>

                  <span class="gw-mobile">(-24)</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>125</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>8,898,520</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.4</span>
              <span class="kpi"><b>Played</b>7/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Doan Trung Tung"
                    onclick="favorite(event, 7943291, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 7943291, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_7943291" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            

            
            
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            

            

            <div class="transfers">
              
                
                
                <span class="xfer"
                      data-in-id="661"
                      data-out-id="525">
                  <span class="out">Wood</span>
                  <span class="arrow">→</span>
                  <span class="in">Ekitiké</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="283"
                      data-out-id="430">
                  <span class="out">Haaland</span>
                  <span class="arrow">→</span>
                  <span class="in">Mateta</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="419"
                      data-out-id="450">
                  <span class="out">Cunha</span>
                  <span class="arrow">→</span>
                  <span class="in">Grealish</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="381"
                      data-out-id="242">
                  <span class="out">Dewsbury-Hall</span>
                  <span class="arrow">→</span>
                  <span class="in">M.Salah</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="347"
                      data-out-id="436">
                  <span class="out">De Ligt</span>
                  <span class="arrow">→</span>
                  <span class="in">Gudmundsson</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="72"
                      data-out-id="402">
                  <span class="out">Aït-Nouri</span>
                  <span class="arrow">→</span>
                  <span class="in">Senesi</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="257"
                      data-out-id="38">
                  <span class="out">Konsa</span>
                  <span class="arrow">→</span>
                  <span class="in">Lacroix</span>
                </span>
                
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Raya*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Raya
                </h5>

                <p class="table-player-percent base *Raya*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Lacroix*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Lacroix
                </h5>

                <p class="table-player-percent base *Lacroix*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/11.png"
                     
                     alt="club shirt">



                <p class="label_*Gudmundsson*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gudmundsson
                </h5>

                <p class="table-player-percent base *Gudmundsson*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Senesi*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Senesi
                </h5>

                <p class="table-player-percent base *Senesi*">0%</p>
                <p class="table-player-live">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="7943291_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*M.Salah* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  M.Salah (C)
                </h5>

                <p class="table-player-percent base *M.Salah*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Semenyo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Semenyo
                </h5>

                <p class="table-player-percent base *Semenyo*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Kudus*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Kudus
                </h5>

                <p class="table-player-percent base *Kudus*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_*Grealish*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Grealish
                </h5>

                <p class="table-player-percent base *Grealish*">0%</p>
                <p class="table-player-live">2</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Ekitiké*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Ekitiké
                </h5>

                <p class="table-player-percent base *Ekitiké*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Mateta*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Mateta
                </h5>

                <p class="table-player-percent base *Mateta*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7943291_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7943291_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Vicario
                </h5>

                <p class="table-player-percent base *Vicario*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7943291_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Reijnders
                </h5>

                <p class="table-player-percent base *Reijnders*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7943291_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Saliba
                </h5>

                <p class="table-player-percent base *Saliba*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7943291_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  N.Williams
                </h5>

                <p class="table-player-percent base *N.Williams*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="8008997"
        data-total="124"
        data-gw="-2"
        data-hit="-8"
        data-gwgross = "6"
        data-played="5"
        data-played_rem = "7"
        data-or="8953938"
        data-ft="1"
        data-tv="100.1"
        data-rank="4"
        data-trend="0"
        data-activechip=""
        data-captain = "M.Salah"
        data-used = "[&#39;WC&#39;, &#39;BB&#39;, &#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">4</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/8008997/event/4">
                  <div class="team-name">Galaticos FC</div>
                  </a>
              <div class="manager">
                Alex Tran

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">M.Salah (C). To Play: 7</span>
              <span class="badge soft" style="width:128px;display:none">VC: Haaland</span>

              <div class="chips">

                
                
                  
                  <span class="chip">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>8,953,938</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">7</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">M.Salah</div>
  <div class="vice">Haaland</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">6</span>
                
                  <span class="gw-hit"> (-8)=-2 </span>

                  <span class="gw-mobile">(-8)</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>124</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>8,953,938</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.1</span>
              <span class="kpi"><b>Played</b>5/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Alex Tran"
                    onclick="favorite(event, 8008997, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 8008997, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_8008997" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            

            
            
              
            
              
                
              
            
              
                
              
            
              
                
              
            

            

            <div class="transfers">
              
                
                
                <span class="xfer"
                      data-in-id="82"
                      data-out-id="450">
                  <span class="out">Cunha</span>
                  <span class="arrow">→</span>
                  <span class="in">Semenyo</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="335"
                      data-out-id="267">
                  <span class="out">Sarr</span>
                  <span class="arrow">→</span>
                  <span class="in">King</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="256"
                      data-out-id="441">
                  <span class="out">Dorgu</span>
                  <span class="arrow">→</span>
                  <span class="in">Muñoz</span>
                </span>
                
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*Sánchez*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Sánchez
                </h5>

                <p class="table-player-percent base *Sánchez*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Pedro Porro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pedro Porro
                </h5>

                <p class="table-player-percent base *Pedro Porro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Muñoz*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Muñoz
                </h5>

                <p class="table-player-percent base *Muñoz*">0%</p>
                <p class="table-player-live">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_*N.Williams*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  N.Williams
                </h5>

                <p class="table-player-percent base *N.Williams*">0%</p>
                <p class="table-player-played">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Semenyo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Semenyo
                </h5>

                <p class="table-player-percent base *Semenyo*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="8008997_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*M.Salah* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  M.Salah (C)
                </h5>

                <p class="table-player-percent base *M.Salah*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/10.png"
                     
                     alt="club shirt">



                <p class="label_*King*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  King
                </h5>

                <p class="table-player-percent base *King*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_*Reijnders*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Reijnders
                </h5>

                <p class="table-player-percent base *Reijnders*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Rice*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Rice
                </h5>

                <p class="table-player-percent base *Rice*">0%</p>
                <p class="table-player-played">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8008997_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_*Haaland*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Haaland
                </h5>

                <p class="table-player-percent base *Haaland*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8008997_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Dúbravka
                </h5>

                <p class="table-player-percent base *Dúbravka*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8008997_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Marc Guiu
                </h5>

                <p class="table-player-percent base *Marc Guiu*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8008997_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Estève
                </h5>

                <p class="table-player-percent base *Estève*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8008997_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/19.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Diouf
                </h5>

                <p class="table-player-percent base *Diouf*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="8287105"
        data-total="123"
        data-gw="19"
        data-hit="0"
        data-gwgross = "19"
        data-played="5"
        data-played_rem = "7"
        data-or="9009937"
        data-ft="2"
        data-tv="100.5"
        data-rank="5"
        data-trend="0"
        data-activechip=""
        data-captain = "Haaland"
        data-used = "[&#39;WC&#39;, &#39;BB&#39;, &#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">5</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/8287105/event/4">
                  <div class="team-name">nani29</div>
                  </a>
              <div class="manager">
                Tung Nguyen Son

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">Haaland (C). To Play: 7</span>
              <span class="badge soft" style="width:128px;display:none">VC: Raya</span>

              <div class="chips">

                
                
                  
                  <span class="chip">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>9,009,937</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">7</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">Haaland</div>
  <div class="vice">Raya</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">19</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>123</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>9,009,937</span>
              <span class="kpi"><b>FT</b>2</span>
              <span class="kpi"><b>TV</b>£100.5</span>
              <span class="kpi"><b>Played</b>5/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Tung Nguyen Son"
                    onclick="favorite(event, 8287105, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 8287105, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_8287105" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            

            
            
              
            

            

            <div class="transfers">
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Raya*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Raya
                </h5>

                <p class="table-player-percent base *Raya*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Muñoz*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Muñoz
                </h5>

                <p class="table-player-percent base *Muñoz*">0%</p>
                <p class="table-player-live">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_*Rúben*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Rúben
                </h5>

                <p class="table-player-percent base *Rúben*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Pedro Porro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pedro Porro
                </h5>

                <p class="table-player-percent base *Pedro Porro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Calafiori*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Calafiori
                </h5>

                <p class="table-player-percent base *Calafiori*">0%</p>
                <p class="table-player-played">5</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Gakpo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gakpo
                </h5>

                <p class="table-player-percent base *Gakpo*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/16.png"
                     
                     alt="club shirt">



                <p class="label_*Ndoye*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Ndoye
                </h5>

                <p class="table-player-percent base *Ndoye*">0%</p>
                <p class="table-player-played">2</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Kudus*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Kudus
                </h5>

                <p class="table-player-percent base *Kudus*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Gyökeres*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gyökeres
                </h5>

                <p class="table-player-percent base *Gyökeres*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="8287105_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="8287105_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_*Haaland* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Haaland (C)
                </h5>

                <p class="table-player-percent base *Haaland*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8287105_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Ederson M.
                </h5>

                <p class="table-player-percent base *Ederson M.*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8287105_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Mitchell
                </h5>

                <p class="table-player-percent base *Mitchell*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8287105_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Cullen
                </h5>

                <p class="table-player-percent base *Cullen*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="8287105_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/5.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  O.Dango
                </h5>

                <p class="table-player-percent base *O.Dango*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="7987487"
        data-total="101"
        data-gw="26"
        data-hit="0"
        data-gwgross = "26"
        data-played="6"
        data-played_rem = "6"
        data-or="9845416"
        data-ft="1"
        data-tv="100.4"
        data-rank="6"
        data-trend="1"
        data-activechip="WC"
        data-captain = "Isak"
        data-used = "[&#39;BB&#39;, &#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend up">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta">+1</span>
    
  </span>
  <div class="rank">6</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/7987487/event/4">
                  <div class="team-name">PhiHungDentist</div>
                  </a>
              <div class="manager">
                Hùng Đỗ Hoàng Phi

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">Isak (C). To Play: 6</span>
              <span class="badge soft" style="width:128px;display:none">VC: Ekitiké</span>

              <div class="chips">

                
                
                  
                  <span class="chip active">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>9,845,416</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">6</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">Isak</div>
  <div class="vice">Ekitiké</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">26</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>101</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>9,845,416</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.4</span>
              <span class="kpi"><b>Played</b>6/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Hùng Đỗ Hoàng Phi"
                    onclick="favorite(event, 7987487, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 7987487, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_7987487" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            

            
            
              
            

            

            <div class="transfers">
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Raya*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Raya
                </h5>

                <p class="table-player-percent base *Raya*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Gabriel*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gabriel
                </h5>

                <p class="table-player-percent base *Gabriel*">0%</p>
                <p class="table-player-played">9</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/15.png"
                     
                     alt="club shirt">



                <p class="label_*Schär*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Schär
                </h5>

                <p class="table-player-percent base *Schär*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*J.Timber*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  J.Timber
                </h5>

                <p class="table-player-percent base *J.Timber*">0%</p>
                <p class="table-player-played">8</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*Cucurella*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Cucurella
                </h5>

                <p class="table-player-percent base *Cucurella*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Gakpo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gakpo
                </h5>

                <p class="table-player-percent base *Gakpo*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/15.png"
                     
                     alt="club shirt">



                <p class="label_*Elanga*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Elanga
                </h5>

                <p class="table-player-percent base *Elanga*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_*Grealish*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Grealish
                </h5>

                <p class="table-player-percent base *Grealish*">0%</p>
                <p class="table-player-live">2</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Ekitiké*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Ekitiké
                </h5>

                <p class="table-player-percent base *Ekitiké*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="7987487_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Isak* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Isak (C)
                </h5>

                <p class="table-player-percent base *Isak*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="7987487_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7987487_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Dúbravka
                </h5>

                <p class="table-player-percent base *Dúbravka*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7987487_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/15.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Barnes
                </h5>

                <p class="table-player-percent base *Barnes*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7987487_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Kudus
                </h5>

                <p class="table-player-percent base *Kudus*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="7987487_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/9.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Tarkowski
                </h5>

                <p class="table-player-percent base *Tarkowski*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="4158356"
        data-total="87"
        data-gw="-13"
        data-hit="-24"
        data-gwgross = "11"
        data-played="4"
        data-played_rem = "8"
        data-or="9970688"
        data-ft="1"
        data-tv="100.1"
        data-rank="7"
        data-trend="-1"
        data-activechip=""
        data-captain = "M.Salah"
        data-used = "[&#39;WC&#39;, &#39;BB&#39;, &#39;FH&#39;, &#39;TC&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend down">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta">-1</span>
    
  </span>
  <div class="rank">7</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/4158356/event/4">
                  <div class="team-name">Johnny Walker</div>
                  </a>
              <div class="manager">
                Walker Johnny

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">M.Salah (C). To Play: 8</span>
              <span class="badge soft" style="width:128px;display:none">VC: Mateta</span>

              <div class="chips">

                
                
                  
                  <span class="chip">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>9,970,688</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">8</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">M.Salah</div>
  <div class="vice">Mateta</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">11</span>
                
                  <span class="gw-hit"> (-24)=-13 </span>

                  <span class="gw-mobile">(-24)</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>87</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>9,970,688</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£100.1</span>
              <span class="kpi"><b>Played</b>4/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Walker Johnny"
                    onclick="favorite(event, 4158356, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 4158356, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_4158356" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            

            
            
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            

            

            <div class="transfers">
              
                
                
                <span class="xfer"
                      data-in-id="253"
                      data-out-id="565">
                  <span class="out">Vicario</span>
                  <span class="arrow">→</span>
                  <span class="in">Henderson</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="575"
                      data-out-id="531">
                  <span class="out">Ballard</span>
                  <span class="arrow">→</span>
                  <span class="in">Van de Ven</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="82"
                      data-out-id="427">
                  <span class="out">Reijnders</span>
                  <span class="arrow">→</span>
                  <span class="in">Semenyo</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="582"
                      data-out-id="205">
                  <span class="out">Cullen</span>
                  <span class="arrow">→</span>
                  <span class="in">Kudus</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="499"
                      data-out-id="430">
                  <span class="out">Haaland</span>
                  <span class="arrow">→</span>
                  <span class="in">Isak</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="283"
                      data-out-id="525">
                  <span class="out">Wood</span>
                  <span class="arrow">→</span>
                  <span class="in">Mateta</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="387"
                      data-out-id="669">
                  <span class="out">Ndoye</span>
                  <span class="arrow">→</span>
                  <span class="in">Szoboszlai</span>
                </span>
                
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Henderson*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Henderson
                </h5>

                <p class="table-player-percent base *Henderson*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Calafiori*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Calafiori
                </h5>

                <p class="table-player-percent base *Calafiori*">0%</p>
                <p class="table-player-played">5</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*Cucurella*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Cucurella
                </h5>

                <p class="table-player-percent base *Cucurella*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Pedro Porro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Pedro Porro
                </h5>

                <p class="table-player-percent base *Pedro Porro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/4.png"
                     
                     alt="club shirt">



                <p class="label_*Semenyo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Semenyo
                </h5>

                <p class="table-player-percent base *Semenyo*">0%</p>
                <p class="table-player-live">4</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="4158356_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*M.Salah* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  M.Salah (C)
                </h5>

                <p class="table-player-percent base *M.Salah*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Kudus*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Kudus
                </h5>

                <p class="table-player-percent base *Kudus*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Szoboszlai*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Szoboszlai
                </h5>

                <p class="table-player-percent base *Szoboszlai*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Isak*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Isak
                </h5>

                <p class="table-player-percent base *Isak*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/8.png"
                     
                     alt="club shirt">



                <p class="label_*Mateta*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Mateta
                </h5>

                <p class="table-player-percent base *Mateta*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4158356_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_*João Pedro*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  João Pedro
                </h5>

                <p class="table-player-percent base *João Pedro*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4158356_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Dúbravka
                </h5>

                <p class="table-player-percent base *Dúbravka*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4158356_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Van de Ven
                </h5>

                <p class="table-player-percent base *Van de Ven*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4158356_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/10.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  King
                </h5>

                <p class="table-player-percent base *King*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4158356_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/2.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Alex Moreno
                </h5>

                <p class="table-player-percent base *Alex Moreno*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
          </ul>
        </div>

      </details>

    
      
      
      
      
      
      
      

      
      
      
      
      
      
      
      
      
      
      
      
      






  
  
  
    
    
  


      
      
      
      

      <details class="row"
        
        data-fpl-id="4454760"
        data-total="58"
        data-gw="-11"
        data-hit="-32"
        data-gwgross = "21"
        data-played="4"
        data-played_rem = "8"
        data-or="9996730"
        data-ft="1"
        data-tv="99.8"
        data-rank="8"
        data-trend="0"
        data-activechip=""
        data-captain = "Ekitiké"
        data-used = "[&#39;WC&#39;, &#39;BB&#39;, &#39;FH&#39;]"
      >
        <summary >
          <!-- 4-column row header aligns with the thead above -->
          <div class="row-header ">
            <!-- Position -->
            <div class="rank-wrap" title="...">
  <span class="trend same">
    <span class="arrow" aria-hidden="true"></span>
    
      <span class="delta placeholder"></span>
    
  </span>
  <div class="rank">8</div>
</div>



            <!-- Manager (team + manager + heart + chips + small captain/played info) -->
            <div class="id">
              <a style="width:fit-content" target="_blank" href="https://fantasy.premierleague.com/entry/4454760/event/4">
                  <div class="team-name">dautamhanhxxxlll</div>
                  </a>
              <div class="manager">
                Satthuvongcam Chemdinhchatsat

              </div>

              <span class="manager" style="font-weight:bold;color:black;display:none">Ekitiké (C). To Play: 8</span>
              <span class="badge soft" style="width:128px;display:none">VC: Raya</span>

              <div class="chips">

                
                
                  
                  <span class="chip">WC</span>
                
                  
                  <span class="chip">BB</span>
                
                  
                  <span class="chip">FH</span>
                
                  
                  <span class="chip used">TC</span>
                

                <span class="kpi" style="width:fit-content;color:black"><b>OR</b>9,996,730</span>
              </div>
            </div>
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">8</div>
<div class="id" style="align-items:center; justify-self:center; text-align:center; font-size:12px">
  <div class="captain">Ekitiké</div>
  <div class="vice">Raya</div>
</div>            <!-- GW column (plain numbers, no bubble) -->
            <div class="id" style="align-items:center; justify-self:center; text-align:center;font-size:12px">
              <div class="gw-stack" >
                <span class="gw-main">21</span>
                
                  <span class="gw-hit"> (-32)=-11 </span>

                  <span class="gw-mobile">(-32)</span>
                
              </div>
            </div>

            <!-- Total column (plain number) -->
            <div class="total" style="width:auto; margin-left:auto; text-align:center;font-weight:700"><b></b>58</div>

            <span class="chev" aria-hidden="true"></span>
          </div>

          <!-- strip under the header (KPIs + transfers) -->
          <div class="strip">
            <div class="kpis">
              <span class="kpi" style="display:none"><b>OR</b>9,996,730</span>
              <span class="kpi"><b>FT</b>1</span>
              <span class="kpi"><b>TV</b>£99.8</span>
              <span class="kpi"><b>Played</b>4/12</span>
              <svg class="heart-btn" role="button" tabindex="0"
                    aria-pressed="false"
                    aria-label="Toggle favorite"
                    data-name="Satthuvongcam Chemdinhchatsat"
                    onclick="favorite(event, 4454760, this.dataset.name)"
                    onkeydown="if(event.key==='Enter'||event.key===' '){favorite(event, 4454760, this.dataset.name)}"
                    width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                  <path id="i_4454760" class="heart-path "
                        d="M7.99998 14C7.79926 13.9997 7.60326 13.9391 7.43748 13.8259C4.98154 12.1587 3.91811 11.0156 3.33154 10.3009C2.08154 8.7775 1.48311 7.21344 1.49998 5.51969C1.51967 3.57875 3.07686 2 4.97123 2C6.34873 2 7.30279 2.77594 7.85842 3.42219C7.87602 3.44245 7.89777 3.4587 7.92219 3.46984C7.94661 3.48098 7.97314 3.48674 7.99998 3.48674C8.02682 3.48674 8.05335 3.48098 8.07778 3.46984C8.1022 3.4587 8.12394 3.44245 8.14154 3.42219C8.69717 2.77531 9.65123 2 11.0287 2C12.9231 2 14.4803 3.57875 14.5 5.52C14.5169 7.21406 13.9178 8.77813 12.6684 10.3013C12.0819 11.0159 11.0184 12.1591 8.56248 13.8263C8.39667 13.9393 8.20067 13.9998 7.99998 14V14Z"/>
                </svg>
            </div>

            
            
            

            
            
            
              
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            
              
              
                
              
            

            
            
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            

            

            <div class="transfers">
              
                
                
                <span class="xfer"
                      data-in-id="64"
                      data-out-id="499">
                  <span class="out">Isak</span>
                  <span class="arrow">→</span>
                  <span class="in">Watkins</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="449"
                      data-out-id="21">
                  <span class="out">Rice</span>
                  <span class="arrow">→</span>
                  <span class="in">B.Fernandes</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="7"
                      data-out-id="40">
                  <span class="out">Mings</span>
                  <span class="arrow">→</span>
                  <span class="in">Calafiori</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="1"
                      data-out-id="366">
                  <span class="out">A.Becker</span>
                  <span class="arrow">→</span>
                  <span class="in">Raya</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="408"
                      data-out-id="373">
                  <span class="out">Virgil</span>
                  <span class="arrow">→</span>
                  <span class="in">Rúben</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="5"
                      data-out-id="374">
                  <span class="out">Konaté</span>
                  <span class="arrow">→</span>
                  <span class="in">Gabriel</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="499"
                      data-out-id="64">
                  <span class="out">Watkins</span>
                  <span class="arrow">→</span>
                  <span class="in">Isak</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="384"
                      data-out-id="584">
                  <span class="out">Tel</span>
                  <span class="arrow">→</span>
                  <span class="in">Gakpo</span>
                </span>
                <span class="dot">•</span>
              
                
                
                <span class="xfer"
                      data-in-id="661"
                      data-out-id="430">
                  <span class="out">Haaland</span>
                  <span class="arrow">→</span>
                  <span class="in">Ekitiké</span>
                </span>
                
              
            </div>
          </div>
        </summary>

        <!-- Expand: unchanged -->



        <div class="expand">
          <ul class="table-player-all">
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_0">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Raya*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Raya
                </h5>

                <p class="table-player-percent base *Raya*">0%</p>
                <p class="table-player-played">6</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_1">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_*Walker*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Walker
                </h5>

                <p class="table-player-percent base *Walker*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_2">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Gabriel*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gabriel
                </h5>

                <p class="table-player-percent base *Gabriel*">0%</p>
                <p class="table-player-played">9</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_3">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/1.png"
                     
                     alt="club shirt">



                <p class="label_*Calafiori*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Calafiori
                </h5>

                <p class="table-player-percent base *Calafiori*">0%</p>
                <p class="table-player-played">5</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_4">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/14.png"
                     
                     alt="club shirt">



                <p class="label_*Mbeumo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Mbeumo
                </h5>

                <p class="table-player-percent base *Mbeumo*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_5">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Gakpo*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Gakpo
                </h5>

                <p class="table-player-percent base *Gakpo*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_6">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/14.png"
                     
                     alt="club shirt">



                <p class="label_*B.Fernandes*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  B.Fernandes
                </h5>

                <p class="table-player-percent base *B.Fernandes*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_7">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/18.png"
                     
                     alt="club shirt">



                <p class="label_*Kudus*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Kudus
                </h5>

                <p class="table-player-percent base *Kudus*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              
                
                
              

              

              
              
                
                  
                
              

              <li class="table-player " id="4454760_8">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/12.png"
                     
                     alt="club shirt">



                <p class="label_*Ekitiké* label_cap " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Ekitiké (C)
                </h5>

                <p class="table-player-percent base *Ekitiké*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_9">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/2.png"
                     
                     alt="club shirt">



                <p class="label_*Watkins*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Watkins
                </h5>

                <p class="table-player-percent base *Watkins*">0%</p>
                <p class="table-player-live">1</p>
              </li>
            
              
              
                
              

              
              

              

              
              

              <li class="table-player " id="4454760_10">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/14.png"
                     
                     alt="club shirt">



                <p class="label_*Šeško*  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Šeško
                </h5>

                <p class="table-player-percent base *Šeško*">0%</p>
                <p class="table-player-ytoplay">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4454760_11">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/3.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Dúbravka
                </h5>

                <p class="table-player-percent base *Dúbravka*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4454760_12">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/13.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Rúben
                </h5>

                <p class="table-player-percent base *Rúben*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4454760_13">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/7.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  James
                </h5>

                <p class="table-player-percent base *James*">0%</p>
                <p class="table-player-bench">0</p>
              </li>
            
              
              
                
              

              
              

              
                
              

              
              

              <li class="table-player " id="4454760_14">
                <img class="table-club-shirt"
                     
                       src="https://livefpl.us/figures/new_logos/15.png"
                     
                     alt="club shirt">



                <p class="label_bench  " style="opacity: 0;color: black;font-size: 2rem;font-weight: 500;position: relative;bottom: 41%;width: 24%;right: -35%;margin-bottom: -41%;">⭐</p>

                <h5 class="table-player-name">
                  Bruno G.
                </h5>

                <p class="table-player-percent base *Bruno G.*">0%</p>
                <p class="table-player-bench">1</p>
              </li>
            
          </ul>
        </div>

      </details>

    
</div>

</div>
<div id="awardsModal" class="modal" aria-hidden="true">
  <div class="modal-content">
    <div class="modal-head">
      <h2>Awards of the Week</h2>
      <button class="close-modal" aria-label="Close">Close</button>
    </div>
    <div class="modal-body" id="awardsBody">
      <!-- JS will inject award rows -->
    </div>
  </div>
</div>

<div id="eoModal" class="modal" aria-hidden="true">
  <div class="modal-content">
    <div class="modal-head">
      <h2>Chips + Ownerships</h2>


    <select id="sampleNModal" style="height:100%;"></select>

      <button class="close-modal" aria-label="Close">Close</button>
    </div>
    <div class="modal-body">

  <div class="table-scroller">
    <table class="chips_tb">
      <thead><tr><th>Chip</th><th>Percentage</th></tr></thead>
      <tbody id="chips_body"></tbody>
    </table>
  </div>

  <div class="table-scroller">
    <table id="ownership">
      <thead>
        <tr>
          <th>Player</th>
          <th>Owned By</th>
          <th>Started By</th>
          <th>(C)</th>
          <th>(TC)</th>
          <th>EO</th>
        </tr>
      </thead>
      <tbody id="ownership_table"></tbody>
    </table>
  </div>
</div>

  </div>
</div>

<div id="compareModal" class="modal" aria-hidden="true">
  <div class="modal-content">
    <div class="modal-head">
      <div>
        <h2 style="margin:0 0 2px">Compare teams</h2>
        <h4 style="margin:0; font-weight:500; color:#6b7280">
          Differences are normal; similarities are faded.
        </h4>
      </div>
      <button class="close-modal" aria-label="Close">Close</button>
    </div>

    <div class="modal-body compare-body">
  <div class="column">
    <select id="home_team" onChange="compare('h',this.value)">
      <option value=-1>Choose Manager</option>
      <option value="8215911,0">Nguyen Nam</option><option value="3977951,1">Nam Morningstar</option><option value="7943291,2">Doan Trung Tung</option><option value="8008997,3">Alex Tran</option><option value="8287105,4">Tung Nguyen Son</option><option value="7987487,5">Hùng Đỗ Hoàng Phi</option><option value="4158356,6">Walker Johnny</option><option value="4454760,7">Satthuvongcam Chemdinhchatsat</option>
    </select>
    <table class="compare-table">
      <thead><tr><th id="th-h"></th></tr></thead>
      <tbody>
        <tr><td class="cp" style="display:none" id="td-h-0"></td></tr><tr><td class="cp" style="display:none" id="td-h-1"></td></tr><tr><td class="cp" style="display:none" id="td-h-2"></td></tr><tr><td class="cp" style="display:none" id="td-h-3"></td></tr><tr><td class="cp" style="display:none" id="td-h-4"></td></tr><tr><td class="cp" style="display:none" id="td-h-5"></td></tr><tr><td class="cp" style="display:none" id="td-h-6"></td></tr><tr><td class="cp" style="display:none" id="td-h-7"></td></tr><tr><td class="cp" style="display:none" id="td-h-8"></td></tr><tr><td class="cp" style="display:none" id="td-h-9"></td></tr><tr><td class="cp" style="display:none" id="td-h-10"></td></tr><tr><td class="cp" style="display:none" id="td-h-11"></td></tr><tr><td class="cp" style="display:none" id="td-h-12"></td></tr><tr><td class="cp" style="display:none" id="td-h-13"></td></tr><tr><td class="cp" style="display:none" id="td-h-14"></td></tr>
        <tr><td class="cp" id="td-h2-0"></td></tr><tr><td class="cp" id="td-h2-1"></td></tr><tr><td class="cp" id="td-h2-2"></td></tr><tr><td class="cp" id="td-h2-3"></td></tr><tr><td class="cp" id="td-h2-4"></td></tr><tr><td class="cp" id="td-h2-5"></td></tr><tr><td class="cp" id="td-h2-6"></td></tr><tr><td class="cp" id="td-h2-7"></td></tr><tr><td class="cp" id="td-h2-8"></td></tr><tr><td class="cp" id="td-h2-9"></td></tr><tr><td class="cp" id="td-h2-10"></td></tr><tr><td class="cp" id="td-h2-11"></td></tr><tr><td class="cp" id="td-h2-12"></td></tr><tr><td class="cp" id="td-h2-13"></td></tr><tr><td class="cp" id="td-h2-14"></td></tr>
      </tbody>
    </table>
  </div>

  <div class="column">
    <select id="away_team" onChange="compare('a',this.value)">
      <option value=-1>Choose Manager</option>
      <option value="8215911,0">Nguyen Nam</option><option value="3977951,1">Nam Morningstar</option><option value="7943291,2">Doan Trung Tung</option><option value="8008997,3">Alex Tran</option><option value="8287105,4">Tung Nguyen Son</option><option value="7987487,5">Hùng Đỗ Hoàng Phi</option><option value="4158356,6">Walker Johnny</option><option value="4454760,7">Satthuvongcam Chemdinhchatsat</option>
    </select>
    <table class="compare-table">
      <thead><tr><th id="th-a"></th></tr></thead>
      <tbody>
        <tr><td class="cp" style="display:none" id="td-a-0"></td></tr><tr><td class="cp" style="display:none" id="td-a-1"></td></tr><tr><td class="cp" style="display:none" id="td-a-2"></td></tr><tr><td class="cp" style="display:none" id="td-a-3"></td></tr><tr><td class="cp" style="display:none" id="td-a-4"></td></tr><tr><td class="cp" style="display:none" id="td-a-5"></td></tr><tr><td class="cp" style="display:none" id="td-a-6"></td></tr><tr><td class="cp" style="display:none" id="td-a-7"></td></tr><tr><td class="cp" style="display:none" id="td-a-8"></td></tr><tr><td class="cp" style="display:none" id="td-a-9"></td></tr><tr><td class="cp" style="display:none" id="td-a-10"></td></tr><tr><td class="cp" style="display:none" id="td-a-11"></td></tr><tr><td class="cp" style="display:none" id="td-a-12"></td></tr><tr><td class="cp" style="display:none" id="td-a-13"></td></tr><tr><td class="cp" style="display:none" id="td-a-14"></td></tr>
        <tr><td class="cp" id="td-a2-0"></td></tr><tr><td class="cp" id="td-a2-1"></td></tr><tr><td class="cp" id="td-a2-2"></td></tr><tr><td class="cp" id="td-a2-3"></td></tr><tr><td class="cp" id="td-a2-4"></td></tr><tr><td class="cp" id="td-a2-5"></td></tr><tr><td class="cp" id="td-a2-6"></td></tr><tr><td class="cp" id="td-a2-7"></td></tr><tr><td class="cp" id="td-a2-8"></td></tr><tr><td class="cp" id="td-a2-9"></td></tr><tr><td class="cp" id="td-a2-10"></td></tr><tr><td class="cp" id="td-a2-11"></td></tr><tr><td class="cp" id="td-a2-12"></td></tr><tr><td class="cp" id="td-a2-13"></td></tr><tr><td class="cp" id="td-a2-14"></td></tr>
      </tbody>
    </table>
  </div>
</div>

  </div>
</div>



<!-- put these before your closing </body> if you don't already load them elsewhere -->
<link id="dt-css" rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">
<!-- Re-download league button -->
<input type="button"
       class="btn redownload-btn"
       value="Something looks wrong? re-download!"
       onclick="redownload()" />




<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>
    /* Footer Styles */
.footer {
  background-color: #0f172a;
  color: var(--white);
  padding: 4.8rem 2.4rem 1.6rem 2.4rem;
}

.footer-w {
  max-width: 112rem;
  margin: 0 auto;
}

.footer-header {
  display: flex;
  justify-content: space-between;
}

.footer-signup-text {
  font-size: 1.4rem;
  margin-bottom: 0.8rem;
}

.footer-signup-button {
  border: none;
  outline: none;
  background-color: var(--green);
  font-family: inherit;
  margin: 0;
  height: 4.8rem;
  width: 17.6rem;
  color: var(--white);
}

.footer-signup-button:hover {
  background-color: var(--light-green);
  color: var(--black);
}

.footer-img {
  height: 3.2rem;
  width: 18rem;
}


.footer-content {
  margin: 4.8rem 0;
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
}

.footer-content-items {
  display: flex;
  flex-direction: column;
  margin-bottom: 4.8rem;
}

.footer-content-items h4 {
  font-size: 1.6rem;
  font-weight: bold;
}

.footer-content-items a {
  color: var(--dark-white);
  padding: 0.8rem 0;
  margin-top: 1rem;
}

.footer-content-items a:hover {
  color: var(--light-green);
}

.footer-copyright {
  text-align: center;
  color: var(--darkest-white);
}

</style>
  </head><body><section class="footer">
    <div class="footer-w">
      <div class="footer-header">
        <!-- Footer Logo -->
        <img class="footer-img" src="https://livefpl.us/figures/livefpllogo.png" alt="logo">
        <!-- Get started text -->
        
        <div class="footer-signup">
          <p class="footer-signup-text" style="float:left">Get free access to extra tools: Planner, Tracking Favorite Managers and more</p>
          <br><button class="footer-signup-button" href="../signup" style="float:right">Sign Up!</button>
        </div>
      </div>
      <!-- Footer Items -->
      <div class="footer-content">
        <!-- Live Tools -->
        <div class="footer-content-items">
          <h4>Live Tools</h4>
          <a href="../rank">Live Rank</a>
          <a href="../leagues">Live Leagues </a>
          <a href="../games">Live Games &amp; Bonus</a>
          <a href="../whatif">What if? Rank for all Scenarios</a>
          <a href="../autosubs">Live Auto-Subs</a>
        </div>
        <div class="footer-content-items">
          <h4>Price Changes</h4>
          <a href="../prices">Predictor</a>
          <a href="../price_changes">Actual Changes</a>
          
        </div>
        <!-- Rabking Tools -->
        <div class="footer-content-items">
          <h4>Rank Tier Statistics</h4>
          <a href="../EO">Effective Ownerships</a>
            <a href="../chips">Chip Usage and Templates</a>
          <a href="../top10k">Top10k Captains, Chips &amp; EOs</a>
          <a href="../top10k_ownership">Ownership Combinations in Top10k</a>
          <a href="../dgw">Number of DGW/BGW Players in Ranks</a>
          <a href="../Overall">Overall Captains, Chips &amp; EOs</a>
          <a href="../Overall_ownership">Ownership Combinations Overall</a>
          <a href="../local">Managers Around You</a>
          <a href="../rank_tiers">Compare Different Rank Tiers</a>
        </div>
        <!-- Advanced Tools -->
        <div class="footer-content-items">
          <h4>Planning Tools</h4>
          <a href="../myteam">Transfer Planner</a>
          <a href="../ticker">Season Ticker</a>
          
        </div>
        <!-- Company -->
        <div class="footer-content-items">
          <h4>Privacy Policy</h4>
          <a href="../privacy.pdf">Privacy Policy</a>

        </div>
        <!-- Socials -->
        <div class="footer-content-items">
          <h4>Socials</h4>
          <a href="https://twitter.com/LiveFPLnet">Twitter</a>

        </div>
      </div>

      <!-- Copyright text -->
      <div class="footer-copyright">
        copyright 2025 @ liveFPL. All rights reserved.
      </div>
    </div>
  </section></body></html>
<script async src="//cdn.intergient.com/ramp_core.js"></script>

<script>
function redownload(){
  fetch("/delete_league", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({})
  })
  .then(r => r.text())
  .then(html => {
      window.location.reload();

  })
  .catch(err => console.error("Re-download failed", err));
}

(function stickTheadUnderToolbar(){
  const root = document.documentElement;
  const toolbar = document.querySelector('.toolbar');

  function updateOffset(){
    if (!toolbar) return;
    const mb = parseFloat(getComputedStyle(toolbar).marginBottom || '0');
    const h  = toolbar.offsetHeight + mb -5; // include bottom margin so the thead doesn't tuck under
    root.style.setProperty('--sticky-under-toolbar', h + 'px');
  }

  // initial + responsive updates
  updateOffset();
  window.addEventListener('load',  updateOffset);
  window.addEventListener('resize', updateOffset);
  if ('ResizeObserver' in window && toolbar){
    new ResizeObserver(updateOffset).observe(toolbar);
  }
})();

(function ensureDataTables(){
  function load(href, isCss){
    return new Promise(res=>{
      const el = document.createElement(isCss?'link':'script');
      if (isCss){ el.rel='stylesheet'; el.href=href; }
      else { el.src=href; el.defer=true; }
      el.onload=res; document.head.appendChild(el);
    });
  }
  const needJQ = !window.jQuery;
  const needDT = !(window.jQuery && jQuery.fn && jQuery.fn.DataTable);
  const jobs = [];
  if (needJQ) jobs.push(load('https://code.jquery.com/jquery-3.7.1.min.js'));
  if (needDT) jobs.push(load('https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js'));
  Promise.all(jobs).then(()=> window.__DT_READY__=true);
})();

function refreshOwnershipTable(stats){
  const hdr = document.querySelector('.chips_tb thead tr th:nth-child(2)');
  if (hdr) hdr.textContent = 'Managers';

  chipsBody.innerHTML = stats.chipsArr.map(r => `
    <tr>
      <td>${r.chip}</td>
      <td data-order="${r.cnt}">${r.cnt} <span class="pct">(${r.pct.toFixed(1)}%)</span></td>
    </tr>
  `).join('');


  const N = stats.N;

  // If DT is ready, feed objects via API; else write plain HTML
  if (window.jQuery?.fn?.DataTable && dtOwnership){
    const rows = stats.players.map(p => ({
      name: p.name,
      owned: p.owned,         ownedPct: (p.owned*100/N).toFixed(1),
      started: p.started,     startedPct: (p.started*100/N).toFixed(1),
      capt: p.capt,           captPct: (p.capt*100/N).toFixed(1),
      triple: p.triple,       triplePct: (p.triple*100/N).toFixed(1),
      eo: +p.eo.toFixed(1)
    }));
    dtOwnership.clear();
    dtOwnership.rows.add(rows).order([5,'desc']).draw(false);
    dtOwnership.columns.adjust();
  } else {
    // No DT yet -> render tbody so first init has content
    ownershipBody.innerHTML = stats.players.map(p => `
      <tr>
        <td>${p.name}</td>
        <td data-order="${p.owned}">${p.owned} (${(p.owned*100/N).toFixed(1)}%)</td>
        <td data-order="${p.started}">${p.started} (${(p.started*100/N).toFixed(1)}%)</td>
        <td data-order="${p.capt}">${p.capt} (${(p.capt*100/N).toFixed(1)}%)</td>
        <td data-order="${p.triple}">${p.triple} (${(p.triple*100/N).toFixed(1)}%)</td>
        <td>${p.eo.toFixed(1)}%</td>
      </tr>
    `).join('');
  }
}


function include_subs(flag){
  fetch('/include_subs', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({ flag })
  }).then(res => {
    if (res.ok) location.reload();
    else console.error('include_subs failed', res.status);
  }).catch(err => console.error(err));
}





/* Sorting only (rows are server-rendered) */
const listEl = document.getElementById('lfplList');
const sortBy = document.getElementById('sortBy');
const orderBtn = document.getElementById('orderBtn');
const chipPriority = {"":0,"WC":1,"BB":2,"FH":3,"TC":4};

function getRows(){ return Array.from(listEl.children); }
function sortRows(key, order){
  const dir = order === 'asc' ? 1 : -1;
  const rows = getRows();
    const collator = new Intl.Collator(undefined, { sensitivity: 'base', numeric: false });

  rows.sort((a,b)=>{
    let va = a.dataset[key] ?? "";
    let vb = b.dataset[key] ?? "";
    if (key === 'activechip'){ va = chipPriority[va] ?? 0; vb = chipPriority[vb] ?? 0; }
    else if (key === 'captain'){
      const res = collator.compare(String(va), String(vb));
      if (res !== 0) return res * dir;}
    else { va = Number(va); vb = Number(vb); }
    if (va < vb) return -1 * dir;
    if (va > vb) return  1 * dir;
    return (Number(a.dataset.rank) - Number(b.dataset.rank)); // tiebreak
  });
  rows.forEach(r => listEl.appendChild(r));
}

//sortRows('total', 'desc'); // initial

(function(){
  const stripOff = document.getElementById('stripOff');
  const stripOn  = document.getElementById('stripOn');

  function apply(hidden){
    document.body.classList.toggle('strip-hidden', hidden);
    if (stripOff && stripOn){
      stripOff.classList.toggle('active', hidden);
      stripOn.classList.toggle('active', !hidden);
    }
  }


// Always ignore saved pref: just default by device
const isMobile = window.matchMedia("(max-width: 640px)").matches;
const hidden = isMobile;   // hide on mobile, show on desktop
apply(hidden);

  // handlers
  stripOff?.addEventListener('click', ()=>{ localStorage.setItem('hideStrip','1'); apply(true); });
  stripOn?.addEventListener('click',  ()=>{ localStorage.setItem('hideStrip','0'); apply(false); });
})();


/* ================= EO + HIGHLIGHTS + EXPORT ================= */

const listRoot = document.getElementById('lfplList');
const eoModal = document.getElementById('eoModal');
const chipsBody = document.getElementById('chips_body');
const ownershipBody = document.getElementById('ownership_table');
const sampleSelModal = document.getElementById('sampleNModal');

const sampleSel   = document.getElementById('sampleN');
const typeSel     = document.getElementById('filterType');
const playerSel   = document.getElementById('filterPlayer');
const countPill   = document.getElementById('countPill');
const openEO      = document.getElementById('openEO');
const exportBtn   = document.getElementById('exportCSV');

const ALL_ROWS = () => Array.from(listRoot.querySelectorAll('.row'));

/* ===== Slim controls: popover + chips ===== */
const filterBtn   = document.getElementById('filterToggle');
const filterPop   = document.getElementById('filterPopover');
const chipsWrap   = document.getElementById('activeChips');
const applyBtn    = document.getElementById('applyFilters');
const clearBtn    = document.getElementById('clearFilters');

// anchor popover below the Filter pill (desktop)
function positionPopover(){
  if (!filterBtn || !filterPop) return;
  if (window.matchMedia('(max-width:640px)').matches){
    // bottom sheet handled by CSS
    return;
  }
  const r = filterBtn.getBoundingClientRect();
  const top = r.bottom + window.scrollY + 6;
  const left= r.left   + window.scrollX-260;
  filterPop.style.top = top + 'px';
  filterPop.style.left= left + 'px';
  filterPop.style.minWidth = Math.max(r.width, 260) + 'px';
}

function openFilter(){
  filterPop.hidden = false;
  filterBtn.setAttribute('aria-expanded','true');
  positionPopover();
}
function closeFilter(){
  filterPop.hidden = true;
  filterBtn.setAttribute('aria-expanded','false');
}
function toggleFilter(){
  if (filterPop.hidden) openFilter(); else closeFilter();
}
filterBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); toggleFilter(); });
window.addEventListener('resize', positionPopover);
document.addEventListener('click', (e)=>{
  if (!filterPop.hidden && !filterPop.contains(e.target) && e.target !== filterBtn){
    closeFilter();
  }
});
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeFilter(); });
let suppressSampleChip = false;   // NEW: prevents showing “Top N” chip when modal drives the change

// Build the active chips line
function updateActiveChips(){
  const chips = [];

  const typeVal   = (typeSel?.value || 'own');
  const playerVal = (playerSel?.value || '');
  const sampleVal = (sampleSel?.value || '0'); // '0' = All

  // has the user applied any non-default filter?
  const hasFilters = (playerVal !== '' || sampleVal !== '0' || typeVal !== 'own');

  if (!hasFilters){
    chipsWrap.innerHTML = '';
    document.querySelector('.area-chips')?.style.setProperty('display','none');
    return; // nothing to show yet
  }



  // only show type chip if user changed it
  if (typeVal !== 'own'){
    const typeMap = { own:'Own', started:'Started', benched:'Benched', captained:'Captained' };
    chips.push({ key:'type', label:typeMap[typeVal] || typeVal });
  }

  if (playerVal) chips.push({ key:'player', label:playerVal });

  if (sampleVal !== '0' && !suppressSampleChip) {
  chips.push({ key:'sample', label:`Top ${sampleVal}` });
}


  // Count chip (kept, readonly)
  const cp = document.getElementById('countPill');
  if (playerVal && cp){ chips.push({ key:'count', label:cp.textContent.replace(/^Count:\s*/,'') }); }
    chips.push({ key:'viewmode', label: (viewMode==='color' ? 'Colored' : 'Filtered') });

chipsWrap.innerHTML = chips.map(c => {
  const extra = (c.key === 'viewmode') ? ' chip-colored' : '';
  const close = (c.key!=='count' && c.key!=='viewmode')
                  ? ' <span class="x" aria-label="Clear">×</span>'
                  : '';
  return `<span class="chip${extra}" data-key="${c.key}">${c.label}${close}</span>`;
}).join('');



  // chip remove
  chipsWrap.querySelectorAll('.chip .x').forEach(x=>{
    x.addEventListener('click', (e)=>{
      e.stopPropagation();
      const key = x.parentElement.dataset.key;
      if (key==='type'){ typeSel.value='own'; }
      else if (key==='player'){ playerSel.value=''; }
      else if (key==='sample'){ sampleSel.value='0'; if (sampleSelModal) sampleSelModal.value='0'; }
      recalcAll();
      updateActiveChips();
    });
  });

    document.querySelector('.area-chips')?.style.setProperty('display','contents'); // or 'block'


}

// Apply/Clear inside popover
applyBtn?.addEventListener('click', ()=>{ closeFilter(); recalcAll(); updateActiveChips(); });
clearBtn?.addEventListener('click', ()=>{
  if (typeSel) typeSel.value='own';
  if (playerSel) playerSel.value='';
  if (sampleSel){ sampleSel.value='0'; if (sampleSelModal) sampleSelModal.value='0'; }
  recalcAll();
  updateActiveChips();
});

// Keep existing “instant apply” behavior too
typeSel?.addEventListener('change', ()=>{ recalcAll(); updateActiveChips(); });
playerSel?.addEventListener('change', ()=>{ highlightRows(); updateActiveChips(); });
sampleSel?.addEventListener('change', ()=>{ if (sampleSelModal) sampleSelModal.value=sampleSel.value; recalcAll(); updateActiveChips(); });
sampleSelModal?.addEventListener('change', ()=>{
  suppressSampleChip = true;      // <— don’t reflect in chips line
  sampleSel.value = sampleSelModal.value;
  recalcAll();
  updateActiveChips();
  suppressSampleChip = false;     // reset
});

// Run once on load
updateActiveChips();




function normalizeName(txt){
  return txt.replace(/\s*\((?:TC|C)\)\s*$/,'').trim();
}

function rowActiveChip(row){
  return row.dataset.activechip || '';
}
function rowPlayers(row){
  // returns array of player <li> elements inside this row
  return Array.from(row.querySelectorAll('.expand .table-player-all > li'));
}
function liName(li){
  const h = li.querySelector('.table-player-name');
  return h ? normalizeName(h.textContent) : '';
}
function liIsCaptain(li){
  const h = li.querySelector('.table-player-name');
  return h ? /\(C\)\s*$/.test(h.textContent) : false;
}
function liIsTripleCaptain(li){
  const h = li.querySelector('.table-player-name');
  return h ? /\(TC\)\s*$/.test(h.textContent) : false;
}
function liStatus(li){
  // look for the status paragraph class
  const statuses = ['played','live','notplay','ytoplay','bench'];
  for (const s of statuses){
    if (li.querySelector('.table-player-' + s)) return s;
  }
  return 'bench';
}
function liIsStarted(li, row){
  const status = liStatus(li);
  if (status !== 'bench') return true;
  // Bench Boost: treat bench as started for EO (old LiveFPL behavior)
  return rowActiveChip(row) === 'BB';
}

function populateSampleOptions(){
  const rows = ALL_ROWS();
  const n = rows.length;

  // Build options once
  const makeOptions = () => {
    const frag = document.createDocumentFragment();
    const all = new Option(`All (${n})`, '0', true, true);
    frag.appendChild(all);
    for (let i=2;i<=n && i<200;i++){
      frag.appendChild(new Option("Top "+String(i), String(i)));
    }
    return frag;
  };

  // (Re)build main select
  sampleSel.innerHTML = '';
  sampleSel.appendChild(makeOptions());

  // (Re)build modal select if present
  if (sampleSelModal){
    sampleSelModal.innerHTML = '';
    sampleSelModal.appendChild(makeOptions());
    // keep same selection
    sampleSelModal.value = sampleSel.value;
  }
}


function collectAllPlayers(){
  const set = new Set();
  ALL_ROWS().forEach(row=>{
    rowPlayers(row).forEach(li=> set.add(liName(li)));
  });
  return Array.from(set).sort((a,b)=> a.localeCompare(b, 'en', {sensitivity:'base'}));
}
function populatePlayerMenuFromStats(stats){
  const keep = playerSel.value; // try to preserve current choice
  playerSel.innerHTML = '';
  playerSel.add(new Option('Choose Player',''));
  stats.players
    .slice() // don’t mutate
    .sort((a,b)=> b.eo - a.eo || b.started - a.started || a.name.localeCompare(b.name))
    .forEach(p=> playerSel.add(new Option(`${p.name} — ${p.eo.toFixed(1)}% EO`, p.name)));
  if (keep && [...playerSel.options].some(o=>o.value===keep)) playerSel.value = keep;
}

function sampleRows(){
  const rows = ALL_ROWS();
  const want = parseInt(sampleSel.value,10);
  if (!want) return rows; // 'All'
  return rows.slice(0, Math.min(want, rows.length));
}

function computeStats(){
  const rows = sampleRows();
  const N = rows.length || 1;

  // Chips this GW
  const chips = {'':0,'WC':0,'BB':0,'FH':0,'TC':0}; // '' => None
  // Player tallies
  const P = new Map(); // name -> {owned, started, capt, triple}

  function ensure(name){
    if(!P.has(name)) P.set(name, {owned:0, started:0, capt:0, triple:0});
    return P.get(name);
  }

  rows.forEach(row=>{
    const ac = rowActiveChip(row);
    if (chips[ac]===undefined) chips[ac]=0;
    chips[ac]++;

    rowPlayers(row).forEach(li=>{
      const name = liName(li);
      if (!name) return;
      const rec = ensure(name);

      rec.owned += 1;
      if (liIsStarted(li,row)) rec.started += 1;
      if (liIsTripleCaptain(li))      {rec.triple += 1;rec.capt   += 1;}
      else if (liIsCaptain(li))       rec.capt   += 1;
    });
  });

  // Convert to arrays with EO%
  const players = [];
  P.forEach((v, name)=>{
    // EO = started + captained + triple-captained (as requested)
    const eo = (v.started + v.capt + v.triple) * 100.0 / N;
    players.push({name, owned:v.owned, started:v.started, capt:v.capt, triple:v.triple, eo});
  });
  players.sort((a,b)=> b.eo - a.eo || b.started - a.started || a.name.localeCompare(b.name));

 const chipsArr = Object.entries(chips).map(([k, c]) => ({
  chip: (k || 'None'),
  cnt: c,
  pct: (c * 100.0 / N)
})).sort((a, b) => b.cnt - a.cnt || b.pct - a.pct);

  return {N, players, chipsArr};
}

function fillModal({N, players, chipsArr}){
  // Chips table
  chipsBody.innerHTML = chipsArr.map(r=>{
    return `<tr><td>${r.chip}</td><td>${r.pct.toFixed(2)}%</td></tr>`;
  }).join('');

  // Ownership/EO table
  ownershipBody.innerHTML = players.map(p=>{
    return `<tr>
      <td>${p.name}</td>
      <td data-order="${p.owned}">${p.owned} (${(p.owned*100/N).toFixed(1)}%)</td>
      <td data-order="${p.started}">${p.started} (${(p.started*100/N).toFixed(1)}%)</td>
      <td data-order="${p.capt}">${p.capt} (${(p.capt*100/N).toFixed(1)}%)</td>
      <td data-order="${p.triple}">${p.triple} (${(p.triple*100/N).toFixed(1)}%)</td>
      <td>${p.eo.toFixed(1)}%</td>
    </tr>`;
  }).join('');
}

function updatePerManagerEO(playersMap){
  // name -> EO%
  const eoMap = new Map(playersMap.map(p => [p.name, p.eo]));

  ALL_ROWS().forEach(row => {
    rowPlayers(row).forEach(li => {
      const name = liName(li);
      const eo = eoMap.get(name);
      if (eo == null) return;

      // write EO% on the tile
      const eoEl = li.querySelector('.table-player-percent');
      if (eoEl) eoEl.textContent = `${eo.toFixed(1)}%`;

      // choose emoji based on (your weight - EO)
      const badge = li.querySelector('[class^="label_"]');
      if (!badge) return;

      // weight (mul): TC 300, C 200, started 100, benched 0 (unless BB)
      let mul = 100;
      const isTC = badge.classList.contains('label_tcap');
      const isC  = badge.classList.contains('label_cap');
      if (isTC)      mul = 300;
      else if (isC)  mul = 200;
      else {
        // if benched and no Bench Boost, your weight is 0
        const started = liIsStarted(li, row); // you already have this helper
        if (!started && rowActiveChip(row) !== 'BB') mul = 0;
      }

      const diff = mul - eo; // positive = you're over the field; negative = under

      // map diff -> emoji
      let emoji = '⭐';
      badge.style.opacity = '0';
      if (diff >= 75) {
  emoji = '⭐';                  // way over field
  badge.style.opacity = '1';
} else if
(diff <= 0) {
  emoji = '🕵️';                 // slightly under field
  badge.style.opacity = '1';
}
 else if (diff <= 25) {
  emoji = '😴';                  // well under field
  badge.style.opacity = '1';
}


      badge.textContent = emoji;
      badge.title = `Δ ${diff.toFixed(1)} (you ${mul} vs EO ${eo.toFixed(1)}%)`;
    });
  });
}


function highlightRows(){
  const type   = typeSel?.value   || 'own';
  const player = playerSel?.value || '';

  const rowsAll   = ALL_ROWS();
  const rowsStats = sampleRows();   // used only for the count pill

  // clear any previous state
  rowsAll.forEach(r=>{
    r.classList.remove('selected','hidden-by-filter');
  });

  let hit = 0;

  if (player){
    const matching = new Set();

    rowsStats.forEach(row=>{
      const found = rowPlayers(row).some(li=>{
        if (liName(li)!==player) return false;
        switch(type){
          case 'own':      return true;
          case 'started':  return liIsStarted(li,row);
          case 'benched':  return !liIsStarted(li,row);
          case 'captained':return liIsCaptain(li) || liIsTripleCaptain(li);
          default: return false;
        }
      });
      if (found) matching.add(row);
    });
    hit = matching.size;

    if (viewMode === 'filter'){
      // hide everything that didn't match; DO NOT color anything
      rowsAll.forEach(r=>{
        r.classList.toggle('hidden-by-filter', !matching.has(r));
        r.classList.remove('selected'); // ensure no color in filter mode
      });
    } else {
      // color-only mode: highlight, never hide
      rowsAll.forEach(r=> r.classList.remove('hidden-by-filter'));
      matching.forEach(r=> r.classList.add('selected'));
    }
  } else {
    // no player selected -> show all, no coloring
    rowsAll.forEach(r=>{
      r.classList.remove('hidden-by-filter','selected');
    });
  }

  const total = rowsStats.length || 1;
  const pct = (hit*100/total).toFixed(2);
  countPill.textContent = `Count: ${hit}/${total} = ${pct}%`;
}


function recalcAll(){
  const stats = computeStats();
  populatePlayerMenuFromStats(stats);
  refreshOwnershipTable(stats);    // <— update modal (DT-aware)
  updatePerManagerEO(stats.players);
  highlightRows();

}

let viewMode = localStorage.getItem('viewMode') || 'color'; // 'color' | 'filter'
const modeColorBtn  = document.getElementById('modeColor');
const modeFilterBtn = document.getElementById('modeFilter');

function setViewMode(mode){
  viewMode = (mode === 'filter') ? 'filter' : 'color';
  localStorage.setItem('viewMode', viewMode);
  modeColorBtn?.classList.toggle('active', viewMode==='color');
  modeFilterBtn?.classList.toggle('active', viewMode==='filter');
  // Re-apply to current list
  highlightRows();
}

// init current state when the page loads
setViewMode(viewMode);

// click handlers inside the popover
modeColorBtn?.addEventListener('click',  ()=> setViewMode('color'));
modeFilterBtn?.addEventListener('click', ()=> setViewMode('filter'));
function openModal()
{ eoModal.setAttribute('open','');
eoModal.style.display='block';


  // If DataTables is present, adjust column widths
  setTimeout(()=>{
    if (window.jQuery?.fn?.DataTable) {
      try { jQuery('#ownership').DataTable().columns.adjust(); } catch(e){}
    }
  }, 0);
}
function closeModal(){ eoModal.removeAttribute('open'); eoModal.style.display='none'; }


function findCaptainFromRow(row){
  // find any element in the ID block that contains (C) or (TC)
  const els = row.querySelectorAll('.id .manager, .id .badge, .id span, .id div');
  for (const el of els){
    const t = el.textContent || '';
    if (/\((?:T)?C\)\s*$/.test(t)) return t.replace(/\s*\((?:T)?C\)\s*$/,'').trim();
  }
  return '';
}
function findViceFromRow(row){
  const v = row.querySelector('.id .badge.soft');
  return v ? v.textContent.replace(/^VC:\s*/,'').trim() : '';
}
function liPoints(li){
  // points are on the <p> whose class matches the status
  const st = liStatus(li);
  const p = li.querySelector('.table-player-' + st);
  return p ? p.textContent.trim() : '';
}



// ---------- helpers for export ----------
function getRoster(row){
  // all 15 players (skip the final “manager” tile if it exists)
  const all = rowPlayers(row).filter(li => !li.classList.contains('manager')).slice(0,15);
  return all.map(li=>{
    const name   = liName(li);
    const status = liStatus(li);
    const ptsEl  = li.querySelector('.table-player-' + status);
    const pts    = ptsEl ? ptsEl.textContent.trim() : '';
    return { name, status, pts };
  });
}
function getManagerName(row){
  // first .manager inside the identity block is the human manager
  const el = row.querySelector('.id .manager');
  return el ? el.textContent.trim() : '';
}
function getCaptainName(row){
if (row.dataset.captain) return row.dataset.captain.trim();
  // the other .manager element contains “{Captain} (C)” or “(TC)”
  const els = row.querySelectorAll('.id .manager');
  for (const el of els){
    if (/\((?:T)?C\)\s*$/.test(el.textContent)){
  return el.textContent.replace(/\s*\((?:TC|C)\)\s*$/,'').trim();
}

  }
  return '';
}
function getViceName(row){
  const t = row.querySelector('.id .badge.soft')?.textContent || '';
  const m = t.match(/VC:\s*(.*)/i);
  return m ? m[1].trim() : '';
}
// CSV escaping + UTF-8 BOM blob
function csvEscape(v){
  const s = String(v ?? '').replace(/\r?\n/g,' ').replace(/"/g,'""');
  return /[",\n]/.test(s) || /^\s|\s$/.test(s) ? `"${s}"` : s;
}

// ---------- Export as UTF-8 CSV with BOM ----------
function exportCSV(){
  const rows = ALL_ROWS();

  const headers = [
  'Rank','Team','Manager','Score(GW)','Hits','Net Score','Total',
  'OR','FT','TV','Played','Active Chip','Captain','Vice','Transfers','FPL ID'
];
  for (let i=1;i<=15;i++){
    const n = String(i).padStart(2,'0');
    headers.push(`P${n}`, `P${n} Status`, `P${n} Pts`);
  }

  const data = [headers];

  const txt = (el, sel) => {
    const n = el.querySelector(sel);
    return n ? n.textContent.trim().replace(/\s+/g,' ') : '';
  };

  rows.forEach(row=>{
    const team    = txt(row, '.team-name');
    const mgr     = getManagerName(row);
    const rank    = txt(row, '.rank');
    const fplId = row.dataset.fplId;
    const score   = row.dataset.gw || '';     // e.g. "39" or net after hits
    const hits   = row.dataset.hit  ?? '0';
    const gross     = row.dataset.gwgross  ?? '0';
    const total   = row.dataset.total || '';  // e.g. "122"
    const chip    = row.dataset.activechip || '';
    const or      = (row.querySelector('.strip .kpis .kpi:nth-child(1)')||{}).textContent?.replace(/^\s*OR\s*/,'').trim() || '';
    const ft      = (row.querySelector('.strip .kpis .kpi:nth-child(2)')||{}).textContent?.replace(/^\s*FT\s*/,'').trim() || '';
    const tv      = (row.querySelector('.strip .kpis .kpi:nth-child(3)')||{}).textContent?.replace(/^\s*TV\s*/,'').trim() || '';
    const played  = (row.querySelector('.strip .kpis .kpi:nth-child(4)')||{}).textContent?.replace(/^\s*Played\s*/,'').trim() || '';
    const cap     = getCaptainName(row);
    const vice    = getViceName(row);
    const transfers = Array.from(row.querySelectorAll('.transfers .xfer')).map(x=>{
      const out = x.querySelector('.out')?.textContent.trim()||'';
      const inn = x.querySelector('.in')?.textContent.trim()||'';
      return `${out} -> ${inn}`;
    }).join(' • ');

    const roster = getRoster(row);
    const flat   = [];
    for (let i=0;i<15;i++){
      const r = roster[i] || {name:'',status:'',pts:''};
      flat.push(r.name, r.status, r.pts);
    }

    data.push([
      rank, team, mgr, gross, hits,score, total, or, ft, tv, played, chip, cap, vice, transfers,fplId,
      ...flat
    ]);
  });

 
 // Build XLSX workbook from the AoA `data`
  const ws = XLSX.utils.aoa_to_sheet(data);
  const wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, 'League');

  // File name: LiveFPL_{league_name}_GW{curgw}.xlsx
  const leagueName = document.body.dataset.league;
  const gw = document.body.dataset.gw || '';
  const gwPart = gw ? `_GW${gw}` : '';
  const filename = `LiveFPL_${leagueName}${gwPart}.xlsx`;

  // Trigger download
  XLSX.writeFile(wb, filename);
}


/* ---------- INIT ---------- */
populateSampleOptions();
recalcAll();

// react to UI
sampleSel.addEventListener('change', () => {
  if (sampleSelModal) sampleSelModal.value = sampleSel.value;
  recalcAll();
});
sampleSelModal?.addEventListener('change', () => {
  sampleSel.value = sampleSelModal.value;
  recalcAll();
});
typeSel.addEventListener('change', highlightRows);
playerSel.addEventListener('change', highlightRows);

let dtOwnership = null;

function initOwnershipDT(){
  if (!window.jQuery || !jQuery.fn.DataTable) return;
  const $ = window.jQuery;

  if (dtOwnership){ dtOwnership.destroy(); dtOwnership = null; }

  dtOwnership = $('#ownership').DataTable({
    // table first, then a bottom bar that contains: filter (f), info (i), paginate (p)
    dom: 't<"dt-bottom"fip>',
    pageLength: 5,
    lengthChange: false,
    order: [[5,'desc']],
    autoWidth: false,
    destroy: true,
    data: [],
    language: {
      search: "Search players:",
      searchPlaceholder: "Type a name…"
    },
    columns: [
  { title: 'Player', data: 'name' },

  { title: 'Owned By', data: 'owned', type: 'num',
    render: (d, t, row) => t === 'display'
      ? `${Number(d)} (${Number(row.ownedPct).toFixed(1)}%)`
      : Number(d)
  },

  { title: 'Started By', data: 'started', type: 'num',
    render: (d, t, row) => t === 'display'
      ? `${Number(d)} (${Number(row.startedPct).toFixed(1)}%)`
      : Number(d)
  },

  { title: '(C)', data: 'capt', type: 'num',
    render: (d, t, row) => t === 'display'
      ? `${Number(d)} (${Number(row.captPct).toFixed(1)}%)`
      : Number(d)
  },

  { title: '(TC)', data: 'triple', type: 'num',
    render: (d, t, row) => t === 'display'
      ? `${Number(d)} (${Number(row.triplePct).toFixed(1)}%)`
      : Number(d)
  },

  { title: 'EO', data: 'eo', type: 'num',
    render: (d, t) => t === 'display'
      ? `${Number(d).toFixed(1)}%`
      : Number(d)
  },
]
  });
}


openEO.addEventListener('click', ()=>{
  openModal();
  const tryInit = ()=>{
    if (window.__DT_READY__){
      initOwnershipDT();
      refreshOwnershipTable(computeStats());   // push latest sample into DT
    } else {
      setTimeout(tryInit, 50);
    }
  };
  tryInit();
});



document.querySelector('#eoModal .close-modal')?.addEventListener('click', closeModal);
eoModal.addEventListener('click', (e)=>{ if (e.target===eoModal) closeModal(); });

// recompute after sorts
orderBtn.addEventListener('click', ()=> setTimeout(recalcAll, 0));
sortBy.addEventListener('change', ()=> setTimeout(recalcAll, 0));

// export
exportBtn.addEventListener('click', exportCSV);


function favorite(e, idz, name){
  e.preventDefault();
  e.stopPropagation(); // don't toggle <summary>

  var username = "";
  if (username === ""){
    alert("You need to be logged in with a free LiveFPL account to save this manager to your tracked managers league. www.livefpl.net/login");
    return 0;
  }

  var $icon = $("#i_"+idz);
  var flag = $icon.hasClass('red-svg'); // true if currently favorited
  var msgz = (flag ? "Removing " : "Adding ") + name + " " + (flag ? "from" : "to") + " your tracked managers";
  console.log(msgz);

  $.ajax({
    type: "POST",
    url: "/favorite",
    data: JSON.stringify({ idz: idz, remove: flag }),
    contentType: 'application/json;charset=UTF-8',
    success: function(html){
      if (html == "OK"){
        // toggle class
        if (flag) { $icon.removeClass("red-svg"); }
        else      { $icon.addClass("red-svg"); }

        // update aria + row highlight
        var on = $icon.hasClass("red-svg");
        var svg = $icon.closest('svg')[0];
        if (svg) svg.setAttribute('aria-pressed', String(on));
        var row = $icon.closest('.row')[0];
        if (row) row.classList.toggle('fav', on);
      }
    }
  });
}

// On load: make rows reflect any pre-favorited hearts (class provided by )
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('path.red-svg').forEach(p=>{
    const svg = p.closest('svg');
    if (svg) svg.setAttribute('aria-pressed','true');
    const row = p.closest('.row');
    if (row) row.classList.add('fav');
  });
});



/* ====== Compare Modal ====== */
const compareModal    = document.getElementById('compareModal');
const openCompareBtn  = document.getElementById('openCompare');
const closeCompareBtn = compareModal?.querySelector('.close-modal');

const homeSel  = document.getElementById('home_team');
const awaySel  = document.getElementById('away_team');
const thHome   = document.getElementById('th-h');
const thAway   = document.getElementById('th-a');
const tbodyHome= thHome.closest('table').querySelector('tbody');
const tbodyAway= thAway.closest('table').querySelector('tbody');

function compare(ha, val){
  // Accept both "12345,7" (old) and "12345" (new)
  const id = String(val).split(',')[0];
  if (ha === 'h') homeSel.value = id; else awaySel.value = id;
  renderCompare();
}


function openCompare(){
  compareModal.setAttribute('open','');
  compareModal.style.display='block';
}
function closeCompare(){
  compareModal.removeAttribute('open');
  compareModal.style.display='none';
}

// Build select options from current table rows
function buildCompareOptions(){
  const rows = ALL_ROWS();
  const mk = (row)=> {
    const id   = row.dataset.fplId || '';
    const team = row.querySelector('.team-name')?.textContent.trim() || '';
    const mgr  = row.querySelector('.id .manager')?.firstChild?.textContent?.trim() || ''; // first text node (before heart)
    const opt  = new Option(`${mgr} — ${team}`, id);
    opt.dataset.fplId = id;
    return opt;
  };

  homeSel.innerHTML = '';
  awaySel.innerHTML = '';
  rows.forEach(r=>{
    homeSel.add(mk(r));
    awaySel.add(mk(r));
  });

  // Nice defaults: select first two (or use -1 as the first if present)
  const preId = '-1'.trim();
  if (preId && [...homeSel.options].some(o=>o.value===preId)) {
    homeSel.value = preId;
    // pick a different default for away if possible
    const second = [...awaySel.options].find(o=>o.value!==preId);
    if (second) awaySel.value = second.value;
  } else {
    if (homeSel.options[0]) homeSel.selectedIndex = 0;
    if (awaySel.options[1]) awaySel.selectedIndex = 1;
  }
}

// Clone a player tile’s HTML safely (no duplicate ids)
function tileHTML(li){
  const clone = li.cloneNode(true);
  clone.removeAttribute('id');
  clone.querySelectorAll('[id]').forEach(n=> n.removeAttribute('id'));

  // keep EO badge; make sure it shows
  const badge = clone.querySelector('.eo-badge');
  if (badge) badge.style.opacity = '1';

  // Name: responsive ellipsis instead of fixed width
  const nm = clone.querySelector('.table-player-name');
  if (nm){
    nm.style.maxWidth = '100%';
    nm.style.whiteSpace = 'nowrap';
    nm.style.overflow = 'hidden';
    nm.style.textOverflow = 'ellipsis';
  }

  return clone.outerHTML;
}


// Get roster (15 tiles) & who “starts” for EO (BB aware)
function rosterFor(fplId){
  const row = document.querySelector(`.row[data-fpl-id="${CSS.escape(fplId)}"]`);
  if (!row) return null;

  // summary/header info
  const gwGross = Number(row.dataset.gwgross || row.dataset.gw || 0);
  const hit     = Number(row.dataset.hit || 0);
  const net     = Number(row.dataset.gw || gwGross + hit);
  const total   = Number(row.dataset.total || 0);
  const chip    = row.dataset.activechip || '';
  const cap     = (function(){
    // uses your earlier helper getCaptainName if present; otherwise derive
    try { return getCaptainName(row); } catch(e){}
    // fallback: scan
    const els = row.querySelectorAll('.id .manager, .id .badge, .id span, .id div');
    for (const el of els){
      const t = el.textContent || '';
      if (/\((?:T)?C\)\s*$/.test(t)) return t.replace(/\s*\((?:TC|C)\)\s*$/,'').trim();

    }
    return '';
  })();

  // tiles
  const tiles = rowPlayers(row)
    .filter(li => !li.classList.contains('manager'))   // only 15
    .slice(0,15)
    .map(li => {
      const name = li.querySelector('.table-player-name')?.textContent
                    ?.replace(/\s*\((?:TC)?C\)\s*$/,'').trim() || '';
      const started = liIsStarted(li, row);  // your helper (BB-aware)
      return { name, started, html: tileHTML(li) };
    });

  const xiCount = (rowActiveChip(row) === 'BB') ? 15 : 11;
  const xi   = tiles.slice(0, xiCount);
  const bench= tiles.slice(xiCount);

  return { row, summary:{gwGross, hit, net, total, cap, chip}, xi, bench, all: tiles, xiCount };
}

// Render a side (differences first, then common faded, then bench faded if XI=11)
function renderSide(tbody, my, other){
  const otherNames = new Set(other.xi.map(p => p.name));
  const diff = my.xi.filter(p => !otherNames.has(p.name));
  const same = my.xi.filter(p =>  otherNames.has(p.name));

  const rows = [];

  // differences first (full)
  diff.forEach(p => rows.push(`<tr><td class="cp">${p.html}</td></tr>`));

  // then shared XI faded
  same.forEach(p => rows.push(`<tr><td class="cp compare-dim">${p.html}</td></tr>`));

  // if XI=11, append bench faded to reach full 15
  if (my.xiCount === 11){
    my.bench.forEach(p => rows.push(`<tr><td class="cp compare-dim">${p.html}</td></tr>`));
  }

  tbody.innerHTML = rows.join('');
}

// Update the “th-…” headers
function headerText(s){
  const chipTxt = s.chip ? s.chip : '—';
  const hitStr  = s.hit ? ` (${s.hit > 0 ? '+'+s.hit : s.hit})` : ' (0)';
  return `Live: ${s.gwGross}${hitStr} = ${s.net}\nTotal: ${s.total}\nChip: ${chipTxt}`;
}

function renderCompare(){
  const homeId = homeSel.value, awayId = awaySel.value;
  if (!homeId || !awayId) return;

  const H = rosterFor(homeId);
  const A = rosterFor(awayId);
  if (!H || !A) return;

  thHome.textContent = headerText(H.summary);
  thAway.textContent = headerText(A.summary);

  renderSide(tbodyHome, H, A);
  renderSide(tbodyAway, A, H);
}

// Wire up
openCompareBtn?.addEventListener('click', ()=>{
  buildCompareOptions();
  openCompare();
  renderCompare();
});
closeCompareBtn?.addEventListener('click', closeCompare);
compareModal?.addEventListener('click', (e)=>{ if (e.target===compareModal) closeCompare(); });

homeSel?.addEventListener('change', renderCompare);
awaySel?.addEventListener('change', renderCompare);

/* ===== GLOBAL TABLE SEARCH (popover) ===== */
const searchBtn   = document.getElementById('openSearch');
const searchPop   = document.getElementById('searchPopover');
const searchInput = document.getElementById('globalSearch');

function toggleSearch(){

}
searchBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); toggleSearch(); });


document.addEventListener('keydown', (e)=>{
  if (e.key === 'Escape') searchPop.setAttribute('hidden','');
  // Cmd/Ctrl+K shortcut
  if ((e.key.toLowerCase() === 'k') && (e.metaKey || e.ctrlKey)){
    e.preventDefault(); toggleSearch();
  }
});

// debounce helper
function debounce(fn, ms=120){ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), ms); }; }

function textOf(el){ return (el?.textContent || '').toLowerCase(); }

// apply search to rows without touching your filter/color logic
function applyGlobalSearch(q){
  const rows = ALL_ROWS();
  const qq = q.trim().toLowerCase();
  if (!qq){
    rows.forEach(r=> r.classList.remove('hidden-by-search'));
    return;
  }
  rows.forEach(row=>{
    const team    = textOf(row.querySelector('.team-name'));
    const manager = textOf(row.querySelector('.id .manager'));
    const transfers = textOf(row.querySelector('.transfers'));
    // include player tiles
    const playersTxt = Array.from(row.querySelectorAll('.table-player-name'))
                            .map(n=> textOf(n)).join(' ');
    const hay = `${team} ${manager} ${transfers} ${playersTxt}`;
    row.classList.toggle('hidden-by-search', !hay.includes(qq));
  });
  // keep counts (if a player filter is active) consistent
  highlightRows();
}
searchInput?.addEventListener('input', debounce(e=> applyGlobalSearch(e.target.value)));

const awardsModal = document.getElementById('awardsModal');
const awardsBody  = document.getElementById('awardsBody');
document.getElementById('openAwards')?.addEventListener('click', ()=>{
  buildAwards();
  awardsModal.setAttribute('open','');
  awardsModal.style.display='block';
});
awardsModal.querySelector('.close-modal')?.addEventListener('click', ()=>closeAwards());
awardsModal.addEventListener('click',(e)=>{ if(e.target===awardsModal) closeAwards(); });
function closeAwards(){
  awardsModal.removeAttribute('open');
  awardsModal.style.display='none';
}

function buildAwards(){
  const rows = ALL_ROWS();
  if (!rows.length) return;

  const num = (x, d=0)=> Number(x ?? d);
  const gw   = r => num(r.dataset.gwgross ?? r.dataset.gw);
  const net  = r => num(r.dataset.gw);
  const hitA = r => Math.abs(num(r.dataset.hit));
  const tv   = r => num(r.dataset.tv);
  const chip = r => (r.dataset.activechip || '');
  const delta= r => num(r.dataset.trend);
  const team = r => rName(r);
  const signed = (x)=> (Number(x) > 0 ? `+${Number(x)}` : String(Number(x)));
  const avgGW = rows.reduce((s,r)=> s + gw(r), 0) / rows.length;

  function capPts(row){
    const capName = getCaptainName(row);
    if (!capName) return 0;
    const roster = getRoster(row);
    const norm = normalizeName(capName);
    const rec = roster.find(p => normalizeName(p.name) === norm);
    return rec ? num(rec.pts) : 0;
  }
  function vicePts(row){
    const v = getViceName(row);
    if (!v) return 0;
    const roster = getRoster(row);
    const norm = normalizeName(v);
    const rec = roster.find(p => normalizeName(p.name) === norm);
    return rec ? num(rec.pts) : 0;
  }
  function benchPts(row){
    const roster = getRoster(row);
    return roster.filter(p => (p.status === 'bench'))
                 .reduce((s,p)=> s + num(p.pts), 0);
  }
  function pick(filterFn, betterFn){
    const cand = rows.filter(filterFn);
    if (!cand.length) return null;
    return cand.reduce((a,b)=> betterFn(a,b) ? a : b);
  }

  const awards = [];

  ;(function(){ const r = pick(_=>true, (a,b)=> gw(a) > gw(b));
    if (r) awards.push({ title:"Top Gun", desc:"Highest Gameweek score",
      winner: `${team(r)} (${gw(r)} pts)`, type:'good' }); })();
 ;(function(){
  const r = pick(_=>true, (a,b)=> net(a) < net(b));  // lowest GW score
  if (r) awards.push({
    title: "Tough Week",
    desc:  "Lowest Gameweek score",
    winner:`${team(r)} (${gw(r)} pts)`,
    type:  'bad'
  });
})();
  ;(function(){ const r = pick(_=>true, (a,b)=> delta(a) > delta(b));
    if (r && delta(r)>0) awards.push({ title:"Comeback Kid", desc:"Biggest rank rise",
      winner: `${team(r)} (+${delta(r)})`, type:'good' }); })();

  ;(function(){ const r = pick(_=>true, (a,b)=> delta(a) < delta(b));
    if (r && delta(r)<0) awards.push({ title:"Rank Crasher", desc:"Biggest rank fall",
      winner: `${team(r)} (${delta(r)})`, type:'bad' }); })();

  ;(function(){ const r = pick(row=>!!chip(row), (a,b)=> gw(a) > gw(b));
    if (r) awards.push({ title:"Chip Master", desc:`Best score with a chip (${chip(r)})`,
      winner: `${team(r)} (${gw(r)} pts)`, type:'good' }); })();

  ;(function(){ const r = pick(row=>!chip(row), (a,b)=> gw(a) > gw(b));
    if (r) awards.push({ title:"No-Chip Warrior", desc:"Best score without playing a chip",
      winner: `${team(r)} (${gw(r)} pts)`, type:'good' }); })();

  ;(function(){ const r = pick(_=>true, (a,b)=> tv(a) > tv(b));
    if (r) awards.push({ title:"Value King", desc:"Highest Team Value",
      winner: `${team(r)} (£${tv(r)})`, type:'good' }); })();

  ;(function(){
    let best=null,bestShare=0;
    rows.forEach(r=>{
      const c=capPts(r), g=gw(r);
      if (g>0){ const s=c/g; if (s>=0.5 && s>bestShare){ best=r; bestShare=s; } }
    });
    if (best) awards.push({ title:"Captain Fantastic",
      desc:"Captain contributed ≥50% of GW score",
      winner:`${team(best)} (${Math.round(bestShare*100)}%)`, type:'good' });
  })();

  // ——— edited to pick WORST below-average
  ;(function(){
    const cand = rows.filter(r => chip(r)==='WC' && gw(r) < avgGW);
    if (!cand.length) return;
    const worst = cand.reduce((a,b)=> (gw(a)-avgGW) < (gw(b)-avgGW) ? a : b);
    awards.push({ title:"Wildcard Wasteland", desc:"Wildcard played but below league average",
      winner:`${team(worst)} (${gw(worst)} vs avg ${avgGW.toFixed(1)})`, type:'bad' });
  })();

  ;(function(){
    const cand = rows.filter(r => chip(r)==='FH' && gw(r) < avgGW);
    if (!cand.length) return;
    const worst = cand.reduce((a,b)=> (gw(a)-avgGW) < (gw(b)-avgGW) ? a : b);
    awards.push({ title:"Free Hit Flop", desc:"Free Hit played but below league average",
      winner:`${team(worst)} (${gw(worst)} vs avg ${avgGW.toFixed(1)})`, type:'bad' });
  })();

  // ——— Captain Calamity: exclude C-DNP/auto-VC by requiring capPts > 0
  ;(function(){
    const r = rows
      .filter(r => {
        const c = capPts(r), v = vicePts(r);
        return (c > 0 && c <= 2) && (v >= 8);
      })
      .sort((a,b)=> (vicePts(b)-capPts(b)) - (vicePts(a)-capPts(a)))[0];
    if (r) awards.push({ title:"Captain Calamity", desc:"Captain blanked while Vice hauled (excludes auto-VC)",
      winner:`${team(r)} (C ${capPts(r)} vs VC ${vicePts(r)})`, type:'bad' });
  })();

  ;(function(){
    const r = rows.map(r=>({row:r,pts:benchPts(r)}))
                  .filter(x=> chip(x.row)!=='BB' && x.pts>=20)
                  .sort((a,b)=> b.pts-a.pts)[0];
    if (r) awards.push({ title:"Bench Disaster", desc:"Left 20+ points on the bench (no Bench Boost)",
      winner:`${team(r.row)} (${r.pts} pts)`, type:'bad' });
  })();

  ;(function(){ const r = pick(_=>true, (a,b)=> hitA(a) > hitA(b));
    if (r && hitA(r)>0) awards.push({ title:"YOLO Manager", desc:"Most transfer hits taken",
      winner:`${team(r)} (${hitA(r)} pts)`, type:'quirk' }); })();

  // ===== Transfers block (guard getCALC and keep your logic) =====
  const CALC = (typeof getCALC === 'function') ? getCALC() : null;
  function transferStats(row){
    if (!CALC) return null;
    const pairs = readTransferPairs(row);
    if (!pairs || !pairs.length) return null;
    let gain = 0;
    pairs.forEach(p => { gain += deltaForPair(p, CALC); });
    const hit = Number(row.dataset.hit || 0);
    return { n: pairs.length, gain, hit, net: gain + hit, team: team(row), row };
  }
  const T = rows.map(transferStats).filter(Boolean);
  if (T.length){
    const best = T.reduce((a,b)=> a.net > b.net ? a : b);
    if (best.net !== 0){
      awards.push({
        title: "Sharpest Trader",
        desc:  "Best net transfer impact (includes hits)",
        winner: `${best.team} (${signed(best.net)} net; ${signed(best.gain)} from moves, ${best.hit} hits)`,
        type: 'good'
      });
    }
    const worst = T.reduce((a,b)=> a.net < b.net ? a : b);
    if (worst.net !== 0){
      awards.push({
        title: "Transfer Tangle",
        desc:  "Worst net transfer impact (includes hits)",
        winner: `${worst.team} (${signed(worst.net)} net; ${signed(worst.gain)} from moves, ${worst.hit} hits)`,
        type: 'bad'
      });
    }
    const hitHero = T.filter(x => x.hit < 0 && x.net > 0)
                     .sort((a,b)=> b.net - a.net)[0];
    if (hitHero){
      awards.push({
        title: "Hit Hero",
        desc:  "Took a hit but still profited overall",
        winner: `${hitHero.team} (${signed(hitHero.net)} net; ${signed(hitHero.gain)} from moves, ${hitHero.hit} hits)`,
        type: 'good'
      });
    }
    const hitPain = T.filter(x => x.hit < 0 && x.net < 0)
                     .sort((a,b)=> a.net - b.net)[0];
    if (hitPain){
      awards.push({
        title: "Painful Hit",
        desc:  "Took a hit and it didn’t pay off",
        winner: `${hitPain.team} (${signed(hitPain.net)} net; ${signed(hitPain.gain)} from moves, ${hitPain.hit} hits)`,
        type: 'bad'
      });
    }
    const oneMove = T.filter(x => x.n === 1 && x.net > 0)
                     .sort((a,b)=> b.net - a.net)[0];
    if (oneMove){
      awards.push({
        title: "One-Move Master",
        desc:  "Single transfer that made a positive difference",
        winner: `${oneMove.team} (${signed(oneMove.net)} net from 1 move)`,
        type: 'good'
      });
    }
  }

  // Render grid & confetti (unchanged)
  const container = document.getElementById('awardsBody');
  container.classList.add('awards-grid');
  container.innerHTML = awards.map(renderAwardCard).join('');
  requestAnimationFrame(()=> burstConfettiIn(container));
}

/* --- Inline award icons (SVG) --- */
const AWARD_ICONS = {
  good: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M8 21h8M12 17v4M7 8a5 5 0 1 0 10 0V4H7v4Z"></path>
      <path d="M7 4 6 2H3v4a2 2 0 0 0 2 2"></path>
      <path d="M17 4 18 2h3v4a2 2 0 0 1-2 2"></path>
    </svg>`,
  bad: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M12 2 2 7l10 5 10-5-10-5Z"></path>
      <path d="M2 17l10 5 10-5"></path>
      <path d="M2 12l10 5 10-5"></path>
    </svg>`,
  quirk: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <circle cx="12" cy="12" r="7"></circle>
      <path d="M9 12h6M12 9v6"></path>
    </svg>`
};

// specific icons by common award titles (optional)
const TITLE_ICON_OVERRIDES = {
  "Top Gun": `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M12 2l3 7 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1 3-7z"></path>
    </svg>`,
  "Comeback Kid": `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M3 12a9 9 0 1 0 9-9"></path>
      <path d="M3 3v6h6"></path>
    </svg>`,
  "Rank Crasher": `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M3 3v18h18"></path>
      <path d="M7 15l4-4 3 3 6-6"></path>
      <path d="M20 16v-7"></path>
    </svg>`,
  "YOLO Manager": `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M12 3v18M6 9l6-6 6 6"></path>
    </svg>`
};

/* Build one fancy card */
function renderAwardCard(a){
  const type = (a.type === 'bad' || a.type === 'quirk') ? a.type : 'good';
  const icon = TITLE_ICON_OVERRIDES[a.title] || AWARD_ICONS[type];

  return `
    <div class="award-card ${type}">
      <div class="confetti" aria-hidden="true"></div>
      <div class="award-head">
        <div class="award-icon">${icon}</div>
        <div class="award-txt">
          <div class="award-title">${a.title}</div>
          <div class="award-desc">${a.desc}</div>
        </div>
      </div>
      <div class="award-win">${a.winner}</div>
    </div>
  `;
}

/* Sprinkle confetti once when opening the modal */
function burstConfettiIn(container){
  const cards = container.querySelectorAll('.award-card .confetti');
  cards.forEach(layer=>{
    layer.innerHTML = ''; // clear
    const rect = layer.getBoundingClientRect();
    const n = 14; // pieces
    for (let i=0;i<n;i++){
      const piece = document.createElement('i');
      const x = Math.random() * (rect.width - 8);
      const y = Math.random() * 8 + 2;
      piece.style.left = x + 'px';
      piece.style.top  = y + 'px';
      // color by parent type
      const parent = layer.closest('.award-card');
      const col = parent.classList.contains('bad') ? '#ef4444'
               : parent.classList.contains('quirk') ? '#6366f1'
               : '#10b981';
      piece.style.background = col;
      piece.style.animationDelay = (Math.random()*0.25) + 's';
      piece.style.transform = `translateY(0) rotate(${(Math.random()*90-45)}deg)`;
      layer.appendChild(piece);
    }
  });
}


function rName(row){
   return (row.querySelector('.manager')?.childNodes[0]?.textContent.trim() || '') +
        " — " +
        (row.querySelector('.team-name')?.textContent.trim() || '')

}


  window.CALC = {"-1": 0, "1": 6, "2": 0, "3": 0, "4": 0, "5": 9, "6": 0, "7": 5, "8": 8, "9": 0, "10": 1, "11": 0, "12": 0, "13": 0, "14": 0, "15": 0, "16": 0, "17": 1, "18": 3, "19": 1, "20": 4, "21": 1, "22": 3, "23": 0, "24": 0, "25": 3, "26": 16, "27": 0, "28": 0, "29": 0, "30": 0, "31": 0, "32": 1, "33": 0, "34": 0, "35": 0, "36": 0, "37": 1, "38": 1, "39": 0, "40": 1, "41": 0, "42": 0, "43": 0, "44": 1, "45": 0, "46": 0, "47": 1, "48": 2, "49": 0, "50": 1, "51": 0, "52": 0, "53": 0, "54": 1, "55": 0, "56": 0, "57": 0, "58": 0, "59": 0, "60": 0, "61": 0, "62": 0, "63": 0, "64": 1, "65": 0, "66": 0, "67": 1, "68": 0, "69": 0, "70": 0, "71": 0, "72": 0, "73": 0, "74": 1, "75": 0, "76": 0, "77": 1, "78": 0, "79": 0, "80": 0, "81": 0, "82": 4, "83": 0, "84": 1, "85": 0, "86": 0, "87": 0, "88": 0, "89": 0, "90": 9, "91": 0, "92": 0, "93": 0, "94": 0, "95": 0, "96": 0, "97": 1, "98": 0, "99": 0, "100": 0, "101": 0, "102": 0, "103": 0, "104": 0, "105": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "122": 0, "123": 0, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "130": 0, "131": 0, "132": 0, "133": 0, "134": 0, "135": 0, "136": 0, "137": 0, "138": 0, "139": 1, "140": 0, "141": 0, "142": 0, "143": 0, "144": 0, "145": 1, "146": 0, "147": 0, "148": 1, "149": 0, "150": 0, "151": 1, "152": 1, "153": 0, "154": 0, "155": 0, "156": 0, "157": 1, "158": 3, "159": 0, "160": 1, "161": 0, "162": 0, "163": 1, "164": 0, "165": 0, "166": 2, "167": 0, "168": 0, "169": 0, "170": 1, "171": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "177": 0, "178": 1, "179": 0, "180": 0, "181": 0, "182": 0, "183": 0, "184": 0, "185": 0, "186": 0, "187": 0, "188": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "194": 0, "195": 0, "196": 0, "197": 0, "198": 0, "199": 0, "200": 0, "201": 0, "202": 0, "203": 0, "204": 0, "205": 0, "206": 0, "207": 0, "208": 0, "209": 0, "210": 0, "211": 0, "212": 0, "213": 0, "214": 0, "215": 0, "216": 0, "217": 0, "218": 0, "219": 0, "220": 0, "221": 0, "222": 0, "223": 0, "224": 0, "225": 0, "226": 0, "227": 0, "228": 0, "229": 0, "230": 0, "231": 0, "232": 0, "233": 0, "234": 0, "235": 0, "236": 0, "237": 0, "238": 0, "239": 0, "240": 0, "241": 0, "242": 1, "243": 0, "244": 0, "245": 0, "246": 0, "247": 0, "248": 0, "249": 0, "250": 0, "251": 0, "252": 0, "253": 1, "254": 0, "255": 0, "256": 0, "257": 4, "258": 1, "259": 0, "260": 1, "261": 1, "262": 0, "263": 0, "264": 0, "265": 0, "266": 6, "267": 0, "268": 0, "269": 0, "270": 1, "271": 1, "272": 1, "273": 0, "274": 0, "275": 0, "276": 0, "277": 0, "278": 0, "279": 0, "280": 0, "281": 0, "282": 0, "283": 1, "284": 0, "285": 0, "286": 0, "287": 1, "288": 0, "289": 0, "290": 0, "291": 1, "292": 0, "293": 1, "294": 0, "295": 1, "296": 0, "297": 0, "298": 0, "299": 3, "300": 0, "301": 0, "302": 1, "303": 4, "304": 0, "305": 0, "306": 0, "307": 0, "308": 0, "309": 0, "310": 0, "311": 1, "312": 0, "313": 0, "314": 1, "315": 0, "316": 0, "317": 4, "318": 4, "319": 0, "320": 0, "321": 0, "322": 1, "323": 0, "324": 1, "325": 0, "326": 0, "327": 0, "328": 1, "329": 1, "330": 1, "331": 0, "332": 2, "333": 0, "334": 0, "335": 1, "336": 0, "337": 0, "338": 1, "339": 0, "340": 0, "341": 1, "342": 1, "343": 1, "344": 0, "345": 0, "346": 0, "347": 1, "348": 1, "349": 0, "350": 2, "351": 0, "352": 0, "353": 0, "354": 1, "355": 0, "356": 0, "357": 0, "358": 0, "359": 0, "360": 0, "361": 0, "362": 0, "363": 0, "364": 0, "365": 0, "366": 0, "367": 0, "368": 0, "369": 0, "370": 0, "371": 0, "372": 0, "373": 0, "374": 0, "375": 0, "376": 0, "377": 0, "378": 0, "379": 0, "380": 0, "381": 0, "382": 0, "383": 0, "384": 0, "385": 0, "386": 0, "387": 0, "388": 0, "389": 0, "390": 0, "391": 0, "392": 0, "393": 0, "394": 0, "395": 0, "396": 0, "397": 0, "398": 0, "399": 0, "400": 0, "401": 0, "402": 0, "403": 0, "404": 0, "405": 0, "406": 0, "407": 0, "408": 0, "409": 0, "410": 0, "411": 0, "412": 0, "413": 0, "414": 0, "415": 0, "416": 0, "417": 0, "418": 0, "419": 2, "420": 0, "421": 0, "422": 0, "423": 0, "424": 0, "425": 0, "426": 1, "427": 0, "428": 0, "429": 0, "430": 0, "431": 0, "432": 0, "433": 0, "434": 0, "435": 0, "436": 0, "437": 0, "438": 0, "439": 0, "440": 0, "441": 0, "442": 0, "443": 0, "444": 0, "445": 0, "446": 0, "447": 0, "448": 0, "449": 0, "450": 0, "451": 0, "452": 0, "453": 0, "454": 0, "455": 0, "456": 0, "457": 0, "458": 0, "459": 0, "460": 0, "461": 0, "462": 0, "463": 0, "464": 0, "465": 0, "466": 0, "467": 0, "468": 0, "469": 3, "470": 0, "471": 0, "472": 0, "473": 0, "474": 1, "475": 0, "476": 1, "477": 1, "478": 3, "479": 0, "480": 0, "481": 0, "482": 0, "483": 0, "484": 0, "485": 0, "486": 0, "487": 1, "488": 1, "489": 4, "490": 1, "491": 1, "492": 0, "493": 1, "494": 0, "495": 0, "496": 0, "497": 0, "498": 0, "499": 0, "500": 0, "501": 0, "502": 1, "503": 0, "504": 0, "505": 1, "506": 3, "507": 0, "508": 0, "509": 0, "510": 0, "511": 1, "512": 0, "513": 0, "514": 0, "515": 2, "516": 1, "517": 4, "518": 0, "519": 0, "520": 0, "521": 2, "522": 1, "523": 0, "524": 0, "525": 1, "526": 0, "527": 0, "528": 0, "529": 0, "530": 0, "531": 0, "532": 1, "533": 0, "534": 0, "535": 0, "536": 0, "537": 0, "538": 0, "539": 0, "540": 0, "541": 1, "542": 0, "543": 1, "544": 1, "545": 0, "546": 0, "547": 0, "548": 0, "549": 0, "550": 0, "551": 0, "552": 1, "553": 1, "554": 0, "555": 0, "556": 0, "557": 0, "558": 0, "559": 0, "560": 1, "561": 0, "562": 0, "563": 0, "564": 0, "565": 0, "566": 0, "567": 0, "568": 0, "569": 0, "570": 0, "571": 0, "572": 0, "573": 0, "574": 0, "575": 0, "576": 0, "577": 0, "578": 0, "579": 0, "580": 0, "581": 0, "582": 0, "583": 0, "584": 0, "585": 0, "586": 0, "587": 0, "588": 0, "589": 0, "590": 0, "591": 0, "592": 0, "593": 0, "594": 0, "595": 0, "596": 0, "597": 0, "598": 0, "599": 0, "600": 0, "601": 0, "602": 0, "603": 0, "604": 0, "605": 0, "606": 0, "607": 0, "608": 0, "609": 0, "610": 0, "611": 0, "612": 0, "613": 0, "614": 0, "615": 0, "616": 0, "617": 0, "618": 0, "619": 0, "620": 0, "621": 0, "622": 0, "623": 0, "624": 0, "625": 0, "626": 0, "627": 1, "628": 0, "629": 0, "630": 0, "631": 1, "632": 0, "633": 1, "634": 1, "635": 1, "636": 0, "637": 1, "638": 0, "639": 0, "640": 0, "641": 0, "642": 1, "643": 0, "644": 0, "645": 0, "646": 1, "647": 0, "648": 0, "649": 0, "650": 0, "651": 0, "652": 0, "653": 0, "654": 0, "655": 0, "656": 0, "657": 0, "658": 0, "659": 0, "660": 0, "661": 0, "662": 7, "663": 0, "664": 0, "665": 0, "666": 6, "667": 0, "668": 4, "669": 2, "670": 1, "671": 0, "672": 0, "673": 0, "674": 0, "675": 0, "676": 0, "677": 0, "678": 0, "679": 0, "680": 0, "681": 0, "682": 0, "683": 1, "684": 0, "685": 0, "686": 0, "687": 0, "688": 0, "689": 0, "690": 0, "691": 1, "692": 0, "693": 0, "694": 2, "695": 0, "696": 1, "697": 0, "698": 1, "699": 0, "700": 0, "701": 0, "702": 0, "703": 0, "704": 0, "705": 0, "706": 0, "707": 0, "708": 0, "709": 0, "710": 0, "711": 0, "712": 1, "713": 0, "714": 8, "715": 0, "716": 0, "717": 0, "718": 0, "719": 0, "720": 1, "721": 1, "722": 0, "723": 0, "724": 0, "725": 0, "726": 0, "727": 0, "728": 0, "729": 0, "730": 0, "731": 0, "732": 0, "733": 0, "734": 1, "735": 0, "736": 0, "737": 0, "738": 0, "739": 0, "740": 0, "741": 0, "742": 0, "743": 0, "744": 0, "745": 0, "746": 0, "747": 0, "748": 0, "749": 0, "750": 0, "751": 0, "752": 0, "753": 0, "754": 0, "755": 0, "756": 0, "757": 0, "758": 0, "759": 0, "760": 0, "761": 0, "762": 0, "763": 0, "764": 0, "765": 0, "766": 0, "767": 0, "768": 0, "769": 0, "770": 0, "771": 0, "772": 0, "773": 0, "774": 0, "775": 0, "776": 0, "777": 0, "778": 0, "779": 0, "780": 0, "781": 0, "782": 0, "783": 0, "784": 0, "785": 0, "786": 0, "787": 0, "788": 0, "789": 0, "790": 0, "791": 0, "792": 0, "793": 0, "794": 0, "795": 0, "796": 0, "797": 0, "798": 0, "799": 0, "800": 0, "801": 0, "802": 0, "803": 0, "804": 0, "805": 0, "806": 0, "807": 0, "808": 0, "809": 0, "810": 0, "811": 0, "812": 0, "813": 0, "814": 0, "815": 0, "816": 0, "817": 0, "818": 0, "819": 0, "820": 0, "821": 0, "822": 0, "823": 0, "824": 0, "825": 0, "826": 0, "827": 0, "828": 0, "829": 0, "830": 0, "831": 0, "832": 0, "833": 0, "834": 0, "835": 0, "836": 0, "837": 0, "838": 0, "839": 0, "840": 0, "841": 0, "842": 0, "843": 0, "844": 0, "845": 0, "846": 0, "847": 0, "848": 0, "849": 0, "850": 0, "851": 0, "852": 0, "853": 0, "854": 0, "855": 0, "856": 0, "857": 0, "858": 0, "859": 0, "860": 0, "861": 0, "862": 0, "863": 0, "864": 0, "865": 0, "866": 0, "867": 0, "868": 0, "869": 0, "870": 0, "871": 0, "872": 0, "873": 0, "874": 0, "875": 0, "876": 0, "877": 0, "878": 0, "879": 0, "880": 0, "881": 0, "882": 0, "883": 0, "884": 0, "885": 0, "886": 0, "887": 0, "888": 0, "889": 0, "890": 0, "891": 0, "892": 0, "893": 0, "894": 0, "895": 0, "896": 0, "897": 0, "898": 0, "899": 0, "900": 0, "901": 0, "902": 0, "903": 0, "904": 0, "905": 0, "906": 0, "907": 0, "908": 0, "909": 0, "910": 0, "911": 0, "912": 0, "913": 0, "914": 0, "915": 0, "916": 0, "917": 0, "918": 0, "919": 0, "920": 0, "921": 0, "922": 0, "923": 0, "924": 0, "925": 0, "926": 0, "927": 0, "928": 0, "929": 0, "930": 0, "931": 0, "932": 0, "933": 0, "934": 0, "935": 0, "936": 0, "937": 0, "938": 0, "939": 0, "940": 0, "941": 0, "942": 0, "943": 0, "944": 0, "945": 0, "946": 0, "947": 0, "948": 0, "949": 0, "950": 0, "951": 0, "952": 0, "953": 0, "954": 0, "955": 0, "956": 0, "957": 0, "958": 0, "959": 0, "960": 0, "961": 0, "962": 0, "963": 0, "964": 0, "965": 0, "966": 0, "967": 0, "968": 0, "969": 0, "970": 0, "971": 0, "972": 0, "973": 0, "974": 0, "975": 0, "976": 0, "977": 0, "978": 0, "979": 0, "980": 0, "981": 0, "982": 0, "983": 0, "984": 0, "985": 0, "986": 0, "987": 0, "988": 0, "989": 0, "990": 0, "991": 0, "992": 0, "993": 0, "994": 0, "995": 0, "996": 0, "997": 0, "998": 0, "999": 0};

/* ===== Transfers → points (CALC) ===== */
function getCALC(){ return (window.CALC && typeof window.CALC === 'object') ? window.CALC : null; }
function toNum(x){ const n = Number(x); return Number.isFinite(n) ? n : null; }

function readTransferPairs(row){
  // returns [{inId, outId, el}] only when both ids are numeric
  const pairs = [];
  row.querySelectorAll('.transfers .xfer').forEach(x=>{
    const inId  = toNum(x.getAttribute('data-in-id'));
    const outId = toNum(x.getAttribute('data-out-id'));
    if (inId != null && outId != null) pairs.push({ inId, outId, el:x });
  });
  return pairs;
}

function deltaForPair(pair, CALC){
  const pin  = Number(CALC?.[pair.inId]  ?? 0);
  const pout = Number(CALC?.[pair.outId] ?? 0);
  return pin - pout; // (in − out)
}


function signed(n){ return (n>0?'+':'') + n; }

function setTransfersKPI(row, total){
  // find/create a KPI chip inside this row's strip
  const bar = row.querySelector('.strip .kpis');
  if (!bar) return;
  let chip = bar.querySelector('.kpi.transfers-kpi');
  if (!chip){
    chip = document.createElement('span');
    chip.className = 'kpi transfers-kpi';
    chip.innerHTML = '<b>Transfers</b><span class="val"></span>';
    bar.appendChild(chip);
  }
  const val = chip.querySelector('.val');
  val.textContent = total ? ' ' + signed(total) : ' 0';

  // color hint (optional)
  chip.style.borderColor = '';
  chip.style.background  = '';
  if (total > 0){ chip.style.color = 'var(--ok)'; }
  else if (total < 0){ chip.style.color = 'var(--bad)'; }
  else { chip.style.color = ''; }
}

function annotateTransferRow(row){
  const CALC = getCALC();
  if (!CALC) return;

  const xfers = readTransferPairs(row);
  if (!xfers.length) return;

  const wrap = row.querySelector('.transfers');
  if (!wrap) return;

  // Clean any old per-move diffs/totals to avoid duplicates on re-run
  wrap.querySelectorAll('.xfer-diff').forEach(n => n.remove());

  let gain = 0;

  if (xfers.length === 1){
    // ---- ONE TRANSFER: show (gain) INSIDE the chip; NO outside total ----
    const p = xfers[0];
    const d = deltaForPair(p, CALC);
    gain = d;

    // kill any existing outside total
    const oldTotal = wrap.querySelector('.xfer-total');
    if (oldTotal) oldTotal.remove();

    // add/replace the inline diff inside the chip
    let diff = p.el.querySelector('.xfer-diff');
    if (!diff){
      diff = document.createElement('span');
      diff.className = 'xfer-diff';
      diff.style.opacity = '.7';
      diff.style.marginLeft = '4px';
      p.el.appendChild(diff);
    }
    diff.textContent = ` (${d > 0 ? `+${d}` : d})`;

    // light hint color on the chip border (optional)
    p.el.style.borderColor = d > 0 ? 'var(--ok)' : (d < 0 ? 'var(--bad)' : 'var(--ui-b)');
    return; // done — no outside total in the one-transfer case
  }

  // ---- MULTIPLE TRANSFERS: per-move diffs + outside total (gain − hits) ----
  xfers.forEach(p => {
    const d = deltaForPair(p, CALC);
    gain += d;

    const diff = document.createElement('span');
    diff.className = 'xfer-diff';
    diff.style.opacity = '.7';
    diff.style.marginLeft = '4px';
    diff.textContent = ` (${d > 0 ? `+${d}` : d})`;
    p.el.appendChild(diff);
  });

  // Outside total (includes hits)
  let tag = wrap.querySelector('.xfer-total');
  if (!tag){
    tag = document.createElement('span');
    tag.className = 'xfer-total';
    tag.style.marginLeft = '6px';
    tag.style.fontWeight = '700';
    wrap.appendChild(tag);
  }

  const hit = Number(row.dataset.hit || 0); // usually 0 or negative
  const net = gain + hit;
  const hitTxt = hit !== 0 ? ` − ${Math.abs(hit)}` : '';

  tag.textContent = ` (${gain > 0 ? `+${gain}` : gain}${hitTxt} = ${net > 0 ? `+${net}` : net})`;
  tag.style.color = net > 0 ? 'var(--ok)' : (net < 0 ? 'var(--bad)' : '#6b7280');
}


// run once on load (and you can call again after any DOM updates)
function annotateAllTransfers(){
  document.querySelectorAll('.row').forEach(annotateTransferRow);
}
document.addEventListener('DOMContentLoaded', annotateAllTransfers);

// Anchor the emoji/captain badges to the shirt box
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.table-player').forEach(li => {
    const img = li.querySelector('.table-club-shirt');

    if (!img ) return;

    // create a tiny wrapper just around the shirt + badge
    const wrap = document.createElement('span');
    wrap.className = 'tile-media';
    img.before(wrap);
    wrap.appendChild(img);

  });
});



(() => {
  const listEl   = document.getElementById('lfplList');      // already used by sortRows
  const headers  = document.querySelectorAll('.my-thead .th.sortable');
  const sortBy   = document.getElementById('sortBy');
  const orderBtn = document.getElementById('orderBtn');

  const state = new Map(); // header-key -> 'asc' | 'desc'

  function headerFor(key){
    return Array.from(headers).find(h => h.dataset.key === key);
  }
  function setArrow(el, dir){
    headers.forEach(h => h.classList.remove('sort-asc','sort-desc'));
    if (el) el.classList.add(dir === 'asc' ? 'sort-asc' : 'sort-desc');
  }

  // ONE place to drive everything
  function applySort(key, order){
    state.set(key, order);
    sortBy.value = key;                               // sync dropdown
    orderBtn.dataset.order = order;                   // sync button state
    orderBtn.textContent = order === 'desc' ? 'Sort ▼' : 'Sort ▲'; // sync label
    setArrow(headerFor(key), order);                  // sync arrow
    sortRows(key, order);                             // do the actual sort
  }

  // Wire button: flip current order for current key
  orderBtn.addEventListener('click', () => {
    const key = sortBy.value;
    const next = orderBtn.dataset.order === 'desc' ? 'asc' : 'desc';
    applySort(key, next);                             // use single source
  });

  // Wire dropdown: keep current order, change key
  sortBy.addEventListener('change', () => {
    const ord = orderBtn.dataset.order || 'desc';
    applySort(sortBy.value, ord);
  });

  // Wire header clicks: toggle that header’s order
  headers.forEach(th => {
    th.addEventListener('click', () => {
      const key = th.dataset.key;
      const def = (key === 'rank') ? 'asc' : 'desc';  // your default rule
      const prev = state.get(key);
      const next = prev ? (prev === 'desc' ? 'asc' : 'desc') : def;
      applySort(key, next);                           // centralize updates
    });
  });

  // Initial state (matches your UI: Total + desc)
  applySort('total', 'desc');
})();


</script>



</body>
</html>